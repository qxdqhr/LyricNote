<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LyricNote - 日语AI智能听歌识曲App 高保真原型</title>
    <style>
        /* ===== CSS变量 - 设计系统 ===== */
        :root {
            /* 主色调 */
            --primary-500: #8B5CF6;
            --primary-400: #A78BFA;
            --primary-600: #7C3AED;
            --primary-300: #C4B5FD;
            --primary-700: #6D28D9;
            
            /* 辅助色 */
            --secondary-500: #F97316;
            --secondary-400: #FB923C;
            --secondary-600: #EA580C;
            
            /* 歌词同步色 */
            --sync-500: #3B82F6;
            --sync-400: #60A5FA;
            --sync-600: #2563EB;
            
            /* 文字颜色 */
            --text-primary: #1F2937;
            --text-secondary: #6B7280;
            --text-tertiary: #9CA3AF;
            --text-inverse: #FFFFFF;
            
            /* 背景色 */
            --bg-primary: #FFFFFF;
            --bg-secondary: #F9FAFB;
            --bg-tertiary: #F3F4F6;
            --bg-dark: #111827;
            
            /* 边框颜色 */
            --border-light: #E5E7EB;
            --border-medium: #D1D5DB;
            --border-dark: #9CA3AF;
            
            /* KTV模式色彩 */
            --ktv-bg: #000000;
            --ktv-text-current: #FFD700;
            --ktv-text-next: #FFFFFF;
            --ktv-text-past: #666666;
            --ktv-progress: #FF6B6B;
            
            /* 字体大小 */
            --text-4xl: 36px;
            --text-3xl: 30px;
            --text-2xl: 24px;
            --text-xl: 20px;
            --text-lg: 18px;
            --text-base: 16px;
            --text-sm: 14px;
            --text-xs: 12px;
            --text-ktv-xl: 48px;
            --text-ktv-lg: 36px;
            --text-ktv-md: 24px;
            
            /* 日语字体 */
            --font-japanese-serif: 'Hiragino Mincho ProN', 'Yu Mincho', 'MS PMincho', serif;
            --font-japanese-sans: 'Hiragino Sans', 'Meiryo', 'Yu Gothic', 'MS PGothic', sans-serif;
            --font-romaji: 'SF Pro Display', -apple-system, BlinkMacSystemFont, sans-serif;
            
            /* 间距 */
            --space-1: 4px;
            --space-2: 8px;
            --space-3: 12px;
            --space-4: 16px;
            --space-5: 20px;
            --space-6: 24px;
            --space-8: 32px;
            --space-10: 40px;
            --space-12: 48px;
            
            /* 圆角 */
            --radius-sm: 4px;
            --radius-md: 8px;
            --radius-lg: 12px;
            --radius-xl: 16px;
            --radius-full: 9999px;
            
            /* 阴影 */
            --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);
            --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.07);
            --shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.1);
            --shadow-xl: 0 20px 25px rgba(0, 0, 0, 0.1);
        }

        /* ===== 基础样式重置 ===== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'PingFang SC', 'SF Pro Display', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-secondary);
            color: var(--text-primary);
            overflow-x: hidden;
        }

        /* ===== 容器样式 ===== */
        .phone-container {
            width: 393px;
            height: 852px;
            margin: 20px auto;
            background: var(--bg-primary);
            border-radius: 40px;
            box-shadow: var(--shadow-xl);
            overflow: hidden;
            position: relative;
            border: 8px solid #000;
        }

        .status-bar {
            height: 44px;
            background: var(--bg-primary);
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 var(--space-4);
            font-size: var(--text-sm);
            font-weight: 600;
        }

        .screen {
            height: calc(852px - 44px - 34px);
            overflow: hidden;
            position: relative;
        }

        .safe-area-bottom {
            height: 34px;
            background: var(--bg-primary);
        }

        /* ===== 页面容器 ===== */
        .page {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            transition: transform 0.3s ease-in-out;
            display: flex;
            flex-direction: column;
        }

        .page.hidden {
            transform: translateX(100%);
        }

        .page.slide-left {
            transform: translateX(-100%);
        }

        /* ===== 导航栏 ===== */
        .nav-header {
            height: 56px;
            background: var(--bg-primary);
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 var(--space-4);
            border-bottom: 1px solid var(--border-light);
        }

        .nav-title {
            font-size: var(--text-xl);
            font-weight: 700;
            color: var(--primary-500);
            display: flex;
            align-items: center;
            gap: var(--space-2);
        }

        .nav-actions {
            display: flex;
            gap: var(--space-3);
        }

        .nav-icon {
            width: 24px;
            height: 24px;
            cursor: pointer;
            color: var(--text-secondary);
            transition: color 0.2s ease;
        }

        .nav-icon:hover {
            color: var(--primary-500);
        }

        /* ===== 底部导航 ===== */
        .tab-navigator {
            background: var(--bg-primary);
            border-top: 1px solid var(--border-light);
            padding: var(--space-2) 0;
            display: flex;
            justify-content: space-around;
            align-items: center;
            height: 83px;
        }

        .tab-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: var(--space-1);
            padding: var(--space-2);
            border-radius: var(--radius-md);
            transition: all 0.2s ease;
            cursor: pointer;
            min-width: 60px;
        }

        .tab-item.active {
            color: var(--primary-500);
            background: rgba(139, 92, 246, 0.1);
        }

        .tab-item.inactive {
            color: var(--text-tertiary);
        }

        .tab-icon {
            width: 24px;
            height: 24px;
            font-size: 20px;
        }

        .tab-label {
            font-size: var(--text-xs);
            font-weight: 500;
        }

        /* ===== 按钮组件 ===== */
        .btn {
            padding: var(--space-3) var(--space-5);
            border-radius: var(--radius-lg);
            font-size: var(--text-base);
            font-weight: 600;
            border: none;
            cursor: pointer;
            transition: all 0.2s ease;
            text-decoration: none;
            text-align: center;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: var(--space-2);
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary-500), var(--primary-600));
            color: var(--text-inverse);
            box-shadow: var(--shadow-md);
        }

        .btn-primary:hover {
            transform: translateY(-1px);
            box-shadow: var(--shadow-lg);
        }

        .btn-primary:active {
            transform: translateY(0);
            box-shadow: var(--shadow-sm);
        }

        .btn-secondary {
            background: transparent;
            color: var(--primary-500);
            border: 2px solid var(--primary-500);
        }

        /* ===== 首页样式 ===== */
        .home-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: var(--space-6);
        }

        .recognition-area {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: var(--space-6);
            margin-bottom: var(--space-10);
        }

        .recognition-button {
            width: 240px;
            height: 240px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary-500), var(--secondary-500));
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: var(--shadow-xl);
            position: relative;
            overflow: hidden;
        }

        .recognition-button:hover {
            transform: scale(1.05);
        }

        .recognition-button:active {
            transform: scale(0.95);
        }

        .recognition-button.recording {
            animation: recording-pulse 2s infinite;
        }

        @keyframes recording-pulse {
            0% {
                transform: scale(1);
                box-shadow: 0 0 0 0 rgba(139, 92, 246, 0.7);
            }
            70% {
                transform: scale(1.05);
                box-shadow: 0 0 0 20px rgba(139, 92, 246, 0);
            }
            100% {
                transform: scale(1);
                box-shadow: 0 0 0 0 rgba(139, 92, 246, 0);
            }
        }

        .mic-icon {
            width: 48px;
            height: 48px;
            color: white;
            font-size: 48px;
        }

        .status-text {
            font-size: var(--text-lg);
            color: var(--text-secondary);
            text-align: center;
            max-width: 300px;
        }

        .quick-actions {
            display: flex;
            gap: var(--space-4);
            margin-top: var(--space-8);
        }

        .quick-action {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: var(--space-2);
            padding: var(--space-4);
            background: var(--bg-primary);
            border-radius: var(--radius-xl);
            box-shadow: var(--shadow-md);
            cursor: pointer;
            transition: all 0.2s ease;
            min-width: 80px;
        }

        .quick-action:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .quick-action-icon {
            width: 32px;
            height: 32px;
            color: var(--primary-500);
            font-size: 24px;
        }

        .quick-action-text {
            font-size: var(--text-sm);
            color: var(--text-secondary);
        }

        /* ===== 歌词页面样式 ===== */
        .lyrics-content {
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .song-info {
            background: linear-gradient(135deg, var(--primary-500), var(--secondary-500));
            color: white;
            padding: var(--space-6);
            display: flex;
            align-items: center;
            gap: var(--space-4);
        }

        .song-cover {
            width: 80px;
            height: 80px;
            border-radius: var(--radius-md);
            background: rgba(255, 255, 255, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
        }

        .song-details h2 {
            font-size: var(--text-2xl);
            margin-bottom: var(--space-1);
        }

        .song-details p {
            font-size: var(--text-base);
            opacity: 0.9;
        }

        .lyrics-scroll-area {
            flex: 1;
            padding: var(--space-6) var(--space-4);
            overflow-y: auto;
            background: var(--bg-primary);
        }

        .lyrics-line {
            padding: var(--space-3) 0;
            transition: all 0.3s ease;
            text-align: center;
            line-height: 1.6;
            cursor: pointer;
        }

        .lyrics-line.current {
            color: var(--sync-500);
            font-size: var(--text-xl);
            font-weight: 600;
            text-shadow: 0 2px 4px rgba(59, 130, 246, 0.3);
            transform: scale(1.05);
        }

        .lyrics-line.next {
            color: var(--text-primary);
            font-size: var(--text-lg);
        }

        .lyrics-line.past {
            color: var(--text-tertiary);
            font-size: var(--text-base);
            opacity: 0.6;
        }

        .lyrics-controls {
            background: var(--bg-primary);
            padding: var(--space-4);
            border-top: 1px solid var(--border-light);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .progress-container {
            flex: 1;
            margin: 0 var(--space-4);
        }

        .progress-bar {
            width: 100%;
            height: 4px;
            background: var(--border-light);
            border-radius: var(--radius-full);
            position: relative;
            margin-bottom: var(--space-2);
        }

        .progress-fill {
            height: 100%;
            background: var(--sync-500);
            border-radius: var(--radius-full);
            width: 35%;
            transition: width 0.3s ease;
        }

        .time-display {
            display: flex;
            justify-content: space-between;
            font-size: var(--text-xs);
            color: var(--text-secondary);
        }

        .control-button {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: none;
            background: var(--bg-secondary);
            color: var(--text-secondary);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
        }

        .control-button:hover {
            background: var(--primary-500);
            color: white;
        }

        /* ===== KTV模式样式 ===== */
        .ktv-mode {
            background: var(--ktv-bg);
            color: var(--ktv-text-next);
            padding: var(--space-8);
            text-align: center;
        }

        .ktv-song-info {
            margin-bottom: var(--space-8);
        }

        .ktv-song-info h2 {
            font-size: var(--text-3xl);
            color: var(--ktv-text-current);
            margin-bottom: var(--space-2);
        }

        .ktv-song-info p {
            font-size: var(--text-xl);
            opacity: 0.8;
        }

        .ktv-lyrics-current {
            font-size: var(--text-ktv-xl);
            color: var(--ktv-text-current);
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
            margin-bottom: var(--space-6);
            min-height: 120px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .ktv-lyrics-next {
            font-size: var(--text-ktv-lg);
            color: var(--ktv-text-next);
            opacity: 0.7;
            margin-bottom: var(--space-8);
        }

        .ktv-progress {
            height: 8px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: var(--radius-full);
            margin-bottom: var(--space-8);
        }

        .ktv-progress-fill {
            height: 100%;
            background: var(--ktv-progress);
            border-radius: var(--radius-full);
            width: 35%;
            transition: width 0.3s ease;
        }

        .ktv-controls {
            display: flex;
            justify-content: center;
            gap: var(--space-6);
        }

        .ktv-control-button {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            border: 2px solid var(--ktv-text-next);
            background: transparent;
            color: var(--ktv-text-next);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            transition: all 0.2s ease;
        }

        .ktv-control-button:hover {
            background: var(--ktv-text-current);
            color: var(--ktv-bg);
        }

        /* ===== 创作页面样式 ===== */
        .create-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            background: var(--bg-secondary);
        }

        .create-header {
            background: var(--bg-primary);
            padding: var(--space-4);
            border-bottom: 1px solid var(--border-light);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .create-title {
            font-size: var(--text-lg);
            font-weight: 600;
        }

        .create-actions {
            display: flex;
            gap: var(--space-3);
        }

        .canvas-area {
            flex: 1;
            padding: var(--space-4);
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .canvas {
            width: 270px;
            height: 480px;
            background: white;
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-lg);
            position: relative;
            overflow: hidden;
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 50%, #fecfef 100%);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: var(--space-6);
        }

        .canvas-content {
            color: white;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        .canvas-content h3 {
            font-size: var(--text-2xl);
            margin-bottom: var(--space-4);
            font-weight: 700;
        }

        .canvas-content .lyrics-text {
            font-size: var(--text-lg);
            line-height: 1.8;
            font-style: italic;
        }

        .ai-assistant-panel {
            background: var(--bg-primary);
            border-top: 1px solid var(--border-light);
            padding: var(--space-4);
        }

        .ai-header {
            display: flex;
            align-items: center;
            gap: var(--space-2);
            margin-bottom: var(--space-4);
            color: var(--primary-500);
            font-weight: 600;
        }

        .ai-suggestions {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: var(--space-2);
            margin-bottom: var(--space-4);
        }

        .ai-suggestion {
            aspect-ratio: 1;
            background: var(--bg-secondary);
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
            border: 2px solid transparent;
        }

        .ai-suggestion:hover {
            border-color: var(--primary-500);
            transform: scale(1.05);
        }

        .ai-suggestion.selected {
            border-color: var(--primary-500);
            background: rgba(139, 92, 246, 0.1);
        }

        .toolbar {
            background: var(--bg-primary);
            border-top: 1px solid var(--border-light);
            padding: var(--space-3);
            display: flex;
            justify-content: space-around;
            align-items: center;
        }

        .toolbar-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: var(--space-1);
            cursor: pointer;
            padding: var(--space-2);
            border-radius: var(--radius-md);
            transition: all 0.2s ease;
        }

        .toolbar-item:hover {
            background: rgba(139, 92, 246, 0.1);
            color: var(--primary-500);
        }

        .toolbar-icon {
            font-size: 20px;
        }

        .toolbar-label {
            font-size: var(--text-xs);
        }

        /* ===== 收藏页面样式 ===== */
        .collection-content {
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .search-header {
            background: var(--bg-primary);
            padding: var(--space-4);
            border-bottom: 1px solid var(--border-light);
        }

        .search-input {
            background: var(--bg-secondary);
            border: 2px solid var(--border-light);
            border-radius: var(--radius-full);
            padding: var(--space-3) var(--space-4);
            font-size: var(--text-base);
            width: 100%;
            transition: all 0.2s ease;
        }

        .search-input:focus {
            border-color: var(--primary-500);
            box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.1);
            outline: none;
        }

        .filter-tabs {
            display: flex;
            gap: var(--space-2);
            margin-top: var(--space-4);
        }

        .filter-tab {
            padding: var(--space-2) var(--space-4);
            border-radius: var(--radius-full);
            background: var(--bg-secondary);
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: var(--text-sm);
        }

        .filter-tab.active {
            background: var(--primary-500);
            color: white;
        }

        .collection-list {
            flex: 1;
            padding: var(--space-4);
            overflow-y: auto;
        }

        .collection-item {
            background: var(--bg-primary);
            border-radius: var(--radius-xl);
            padding: var(--space-4);
            margin-bottom: var(--space-3);
            box-shadow: var(--shadow-sm);
            display: flex;
            align-items: center;
            gap: var(--space-3);
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .collection-item:hover {
            transform: translateY(-1px);
            box-shadow: var(--shadow-md);
        }

        .item-cover {
            width: 60px;
            height: 60px;
            border-radius: var(--radius-md);
            background: linear-gradient(135deg, var(--primary-500), var(--secondary-500));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 24px;
        }

        .item-info {
            flex: 1;
        }

        .item-info h4 {
            font-size: var(--text-base);
            color: var(--text-primary);
            margin-bottom: var(--space-1);
        }

        .item-info p {
            font-size: var(--text-sm);
            color: var(--text-secondary);
        }

        .item-actions {
            display: flex;
            gap: var(--space-2);
        }

        .action-button {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            border: none;
            background: var(--bg-secondary);
            color: var(--text-secondary);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
        }

        .action-button:hover {
            background: var(--primary-500);
            color: white;
        }

        /* ===== KTV开关样式 ===== */
        .ktv-toggle-section {
            margin-top: var(--space-8);
            padding: var(--space-4);
        }

        .toggle-container {
            background: var(--bg-primary);
            border-radius: var(--radius-xl);
            padding: var(--space-4);
            box-shadow: var(--shadow-md);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .toggle-label {
            display: flex;
            align-items: center;
            gap: var(--space-3);
        }

        .toggle-icon {
            width: 48px;
            height: 48px;
            background: linear-gradient(135deg, var(--primary-500), var(--secondary-500));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
        }

        .toggle-text {
            display: flex;
            flex-direction: column;
        }

        .toggle-title {
            font-size: var(--text-lg);
            font-weight: 600;
            color: var(--text-primary);
        }

        .toggle-desc {
            font-size: var(--text-sm);
            color: var(--text-secondary);
        }

        .toggle-switch {
            width: 60px;
            height: 32px;
            background: var(--border-medium);
            border-radius: var(--radius-full);
            position: relative;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .toggle-switch.active {
            background: var(--primary-500);
        }

        .toggle-slider {
            width: 28px;
            height: 28px;
            background: white;
            border-radius: 50%;
            position: absolute;
            top: 2px;
            left: 2px;
            transition: all 0.3s ease;
            box-shadow: var(--shadow-sm);
        }

        .toggle-switch.active .toggle-slider {
            transform: translateX(28px);
        }

        /* ===== 收藏夹管理样式 ===== */
        .playlist-header {
            background: var(--bg-primary);
            padding: var(--space-4);
            border-bottom: 1px solid var(--border-light);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .playlist-selector {
            display: flex;
            align-items: center;
            gap: var(--space-2);
            background: var(--bg-secondary);
            padding: var(--space-2) var(--space-3);
            border-radius: var(--radius-lg);
            cursor: pointer;
        }

        .playlist-name {
            font-weight: 600;
            color: var(--text-primary);
        }

        .add-playlist-btn {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: var(--primary-500);
            color: white;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
        }

        .playlist-modal {
            background: var(--bg-primary);
            border-radius: var(--radius-xl);
            padding: var(--space-6);
            margin: var(--space-4);
            max-width: 320px;
            width: 100%;
        }

        .playlist-list {
            max-height: 300px;
            overflow-y: auto;
            margin: var(--space-4) 0;
        }

        .playlist-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: var(--space-3);
            border-radius: var(--radius-md);
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .playlist-item:hover {
            background: var(--bg-secondary);
        }

        .playlist-item.active {
            background: rgba(139, 92, 246, 0.1);
            color: var(--primary-500);
        }

        .playlist-input {
            width: 100%;
            padding: var(--space-3);
            border: 2px solid var(--border-light);
            border-radius: var(--radius-md);
            font-size: var(--text-base);
            margin: var(--space-4) 0;
        }

        .playlist-input:focus {
            border-color: var(--primary-500);
            outline: none;
        }

        /* ===== 日语语言切换组件 ===== */
        .language-switcher {
            display: flex;
            background: var(--bg-primary);
            border-radius: var(--radius-lg);
            padding: var(--space-1);
            box-shadow: var(--shadow-sm);
            margin-bottom: var(--space-4);
            border: 1px solid var(--border-light);
        }

        .language-tab {
            flex: 1;
            padding: var(--space-2) var(--space-3);
            border-radius: var(--radius-md);
            font-size: var(--text-sm);
            font-weight: 600;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s ease;
            border: none;
            background: transparent;
            color: var(--text-secondary);
        }

        .language-tab.active {
            background: var(--primary-500);
            color: white;
            box-shadow: var(--shadow-sm);
        }

        .language-tab:hover:not(.active) {
            background: var(--bg-secondary);
            color: var(--text-primary);
        }

        .language-tab.japanese {
            font-family: var(--font-japanese-sans);
        }

        .language-tab.romaji {
            font-family: var(--font-romaji);
        }

        /* ===== 多语言歌词显示 ===== */
        .lyrics-line-container {
            margin-bottom: var(--space-4);
            padding: var(--space-3);
            border-radius: var(--radius-md);
            transition: all 0.3s ease;
        }

        .lyrics-line-container.current {
            background: rgba(59, 130, 246, 0.1);
            border-left: 4px solid var(--sync-500);
        }

        /* 单语言模式 */
        .lyrics-line-single {
            font-size: var(--text-xl);
            line-height: 1.6;
            text-align: center;
            padding: var(--space-3) 0;
            transition: all 0.3s ease;
        }

        .lyrics-line-single.kanji {
            font-family: var(--font-japanese-serif);
            font-weight: 500;
        }

        .lyrics-line-single.hiragana {
            font-family: var(--font-japanese-sans);
            font-weight: 400;
        }

        .lyrics-line-single.romaji {
            font-family: var(--font-romaji);
            font-weight: 400;
            font-style: italic;
        }

        /* 学习模式（三语同显） */
        .lyrics-line-learning {
            display: flex;
            flex-direction: column;
            gap: var(--space-1);
            text-align: center;
            padding: var(--space-3) 0;
        }

        .lyrics-text-kanji {
            font-size: var(--text-xl);
            font-family: var(--font-japanese-serif);
            color: var(--text-primary);
            font-weight: 600;
        }

        .lyrics-text-hiragana {
            font-size: var(--text-lg);
            font-family: var(--font-japanese-sans);
            color: var(--text-secondary);
        }

        .lyrics-text-romaji {
            font-size: var(--text-base);
            font-family: var(--font-romaji);
            color: var(--text-tertiary);
            font-style: italic;
        }

        /* KTV模式多语言 */
        .ktv-lyrics-multilang {
            text-align: center;
            margin-bottom: var(--space-6);
        }

        .ktv-text-kanji {
            font-size: var(--text-ktv-xl);
            color: var(--ktv-text-current);
            font-family: var(--font-japanese-serif);
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
            margin-bottom: var(--space-2);
        }

        .ktv-text-hiragana {
            font-size: var(--text-ktv-lg);
            color: var(--ktv-text-next);
            font-family: var(--font-japanese-sans);
            opacity: 0.9;
            margin-bottom: var(--space-2);
        }

        .ktv-text-romaji {
            font-size: var(--text-ktv-md);
            color: var(--ktv-text-next);
            font-family: var(--font-romaji);
            font-style: italic;
            opacity: 0.7;
        }

        /* ===== 日语输入优化 ===== */
        .japanese-search-input {
            background: var(--bg-secondary);
            border: 2px solid var(--border-light);
            border-radius: var(--radius-full);
            padding: var(--space-3) var(--space-4);
            font-size: var(--text-base);
            width: 100%;
            transition: all 0.2s ease;
            font-family: var(--font-japanese-sans);
            /* 日语输入法优化 */
            ime-mode: auto;
        }

        .japanese-search-input:focus {
            border-color: var(--primary-500);
            box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.1);
            outline: none;
        }

        .japanese-search-input::placeholder {
            color: var(--text-tertiary);
            font-family: var(--font-japanese-sans);
        }

        /* ===== 学习进度组件 ===== */
        .learning-status-badge {
            display: inline-flex;
            align-items: center;
            gap: var(--space-1);
            padding: var(--space-1) var(--space-2);
            border-radius: var(--radius-full);
            font-size: var(--text-xs);
            font-weight: 600;
            font-family: var(--font-japanese-sans);
        }

        .learning-status-badge.not-started {
            background: var(--bg-tertiary);
            color: var(--text-secondary);
        }

        .learning-status-badge.learning {
            background: rgba(249, 115, 22, 0.1);
            color: var(--secondary-500);
        }

        .learning-status-badge.mastered {
            background: rgba(34, 197, 94, 0.1);
            color: #22c55e;
        }

        /* ===== 日语分类标签 ===== */
        .japanese-category-tabs {
            display: flex;
            gap: var(--space-2);
            margin-bottom: var(--space-4);
            overflow-x: auto;
            padding-bottom: var(--space-2);
        }

        .category-tab {
            padding: var(--space-2) var(--space-4);
            border-radius: var(--radius-full);
            background: var(--bg-secondary);
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: var(--text-sm);
            white-space: nowrap;
            border: 2px solid transparent;
            font-family: var(--font-japanese-sans);
        }

        .category-tab.active {
            background: var(--primary-500);
            color: white;
            border-color: var(--primary-600);
        }

        .category-tab:hover:not(.active) {
            background: var(--bg-primary);
            border-color: var(--border-medium);
        }

        .category-tab.j-pop {
            background: linear-gradient(135deg, #ff6b6b, #feca57);
            color: white;
        }

        .category-tab.anime {
            background: linear-gradient(135deg, #a8e6cf, #88d8c0);
            color: #2d3436;
        }

        .category-tab.learning {
            background: linear-gradient(135deg, #74b9ff, #0984e3);
            color: white;
        }

        /* ===== 动画效果 ===== */
        @keyframes language-switch {
            0% {
                opacity: 0;
                transform: translateY(10px);
            }
            100% {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .lyrics-line.switching {
            animation: language-switch 0.3s ease-out;
        }

        @keyframes text-reveal {
            0% {
                opacity: 0;
                filter: blur(3px);
            }
            100% {
                opacity: 1;
                filter: blur(0);
            }
        }

        .lyrics-text-entering {
            animation: text-reveal 0.5s ease-out;
        }

        /* ===== 个人中心样式 ===== */
        .profile-content {
            flex: 1;
            background: var(--bg-secondary);
        }

        .profile-header {
            background: linear-gradient(135deg, var(--primary-500), var(--secondary-500));
            color: white;
            padding: var(--space-8) var(--space-4);
            text-align: center;
        }

        .profile-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto var(--space-4);
            font-size: 32px;
        }

        .profile-name {
            font-size: var(--text-2xl);
            font-weight: 600;
            margin-bottom: var(--space-2);
        }

        .profile-stats {
            display: flex;
            justify-content: center;
            gap: var(--space-6);
            margin-top: var(--space-4);
        }

        .stat-item {
            text-align: center;
        }

        .stat-number {
            font-size: var(--text-xl);
            font-weight: 700;
            display: block;
        }

        .stat-label {
            font-size: var(--text-sm);
            opacity: 0.9;
        }

        .profile-menu {
            padding: var(--space-4);
        }

        .menu-section {
            background: var(--bg-primary);
            border-radius: var(--radius-xl);
            margin-bottom: var(--space-4);
            overflow: hidden;
        }

        .menu-item {
            display: flex;
            align-items: center;
            gap: var(--space-3);
            padding: var(--space-4);
            cursor: pointer;
            transition: all 0.2s ease;
            border-bottom: 1px solid var(--border-light);
        }

        .menu-item:last-child {
            border-bottom: none;
        }

        .menu-item:hover {
            background: var(--bg-secondary);
        }

        .menu-icon {
            width: 24px;
            height: 24px;
            color: var(--primary-500);
        }

        .menu-text {
            flex: 1;
            font-size: var(--text-base);
        }

        .menu-arrow {
            color: var(--text-tertiary);
        }

        /* ===== 加载动画 ===== */
        .loading {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: var(--space-2);
            color: var(--text-secondary);
        }

        .spinner {
            width: 20px;
            height: 20px;
            border: 2px solid var(--border-light);
            border-top: 2px solid var(--primary-500);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* ===== 响应式设计 ===== */
        @media (max-width: 480px) {
            .phone-container {
                width: 100%;
                height: 100vh;
                margin: 0;
                border-radius: 0;
                border: none;
            }
        }

        /* ===== 模态框样式 ===== */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .modal-overlay.show {
            opacity: 1;
            visibility: visible;
        }

        .modal {
            background: var(--bg-primary);
            border-radius: var(--radius-xl);
            padding: var(--space-6);
            margin: var(--space-4);
            max-width: 320px;
            width: 100%;
            transform: scale(0.9);
            transition: all 0.3s ease;
        }

        .modal-overlay.show .modal {
            transform: scale(1);
        }
    </style>
</head>
<body>
    <!-- 手机容器 -->
    <div class="phone-container">
        <!-- 状态栏 -->
        <div class="status-bar">
            <span>9:41</span>
            <span>100% 🔋</span>
        </div>

        <!-- 主屏幕区域 -->
        <div class="screen">
            <!-- 首页 - 识别页面 -->
            <div class="page" id="homePage">
                <!-- 导航栏 -->
                <div class="nav-header">
                    <div class="nav-title">
                        🎌 LyricNote
                    </div>
                    <div class="nav-actions">
                        <div class="nav-icon" onclick="showModal('設定開発中...')">⚙️</div>
                        <div class="nav-icon" onclick="switchPage('collectionPage')">📖</div>
                    </div>
                </div>

                <!-- 主要内容区域 -->
                <div class="home-content">
                    <div class="recognition-area">
                        <!-- 识别按钮 -->
                        <button class="recognition-button" id="recognitionBtn" onclick="startRecognition()">
                            <div class="mic-icon">🎤</div>
                        </button>
                        
                        <!-- 状态文字 -->
                        <div class="status-text" id="statusText">日本の音楽を認識する</div>
                    </div>

                    <!-- KTV模式开关 -->
                    <div class="ktv-toggle-section">
                        <div class="toggle-container">
                            <div class="toggle-label">
                                <div class="toggle-icon">🎤</div>
                                <div class="toggle-text">
                                    <div class="toggle-title">KTVモード</div>
                                    <div class="toggle-desc">大文字歌詞表示</div>
                                </div>
                            </div>
                            <div class="toggle-switch" onclick="toggleKTVGlobalMode()">
                                <div class="toggle-slider" id="ktvToggle"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 底部导航 -->
                <div class="tab-navigator">
                    <div class="tab-item active" onclick="switchPage('homePage')">
                        <div class="tab-icon">🏠</div>
                        <div class="tab-label">ホーム</div>
                    </div>
                    <div class="tab-item inactive" onclick="switchPage('lyricsPage')">
                        <div class="tab-icon">📝</div>
                        <div class="tab-label">歌詞</div>
                    </div>
                    <div class="tab-item inactive" onclick="switchPage('createPage')">
                        <div class="tab-icon">✨</div>
                        <div class="tab-label">作成</div>
                    </div>
                    <div class="tab-item inactive" onclick="switchPage('collectionPage')">
                        <div class="tab-icon">💾</div>
                        <div class="tab-label">コレクション</div>
                    </div>
                    <div class="tab-item inactive" onclick="switchPage('profilePage')">
                        <div class="tab-icon">👤</div>
                        <div class="tab-label">プロフィール</div>
                    </div>
                </div>
            </div>

            <!-- 歌词页面 -->
            <div class="page hidden" id="lyricsPage">
                <!-- 导航栏 -->
                <div class="nav-header">
                    <div class="nav-title">歌詞同期</div>
                    <div class="nav-actions">
                        <div class="nav-icon" onclick="toggleKTVMode()">🖥️</div>
                        <div class="nav-icon" onclick="showModal('共有機能開発中...')">📤</div>
                    </div>
                </div>

                <!-- 歌词内容 -->
                <div class="lyrics-content">
                    <!-- 歌曲信息 -->
                    <div class="song-info">
                        <div class="song-cover">🎵</div>
                        <div class="song-details">
                            <h2>恋</h2>
                            <p>星野源 • 恋 (Single)</p>
                        </div>
                    </div>

                    <!-- 语言切换器 -->
                    <div class="language-switcher">
                        <button class="language-tab active japanese" onclick="switchLanguage('kanji')">漢字</button>
                        <button class="language-tab japanese" onclick="switchLanguage('hiragana')">ひらがな</button>
                        <button class="language-tab romaji" onclick="switchLanguage('romaji')">Romaji</button>
                        <button class="language-tab" onclick="switchLanguage('learning')">学習モード</button>
                    </div>

                    <!-- 歌词滚动区域 -->
                    <div class="lyrics-scroll-area" id="lyricsContainer">
                        <!-- 汉字模式歌词 -->
                        <div class="lyrics-mode" id="kanjiMode">
                            <div class="lyrics-line-container past">
                                <div class="lyrics-line-single kanji">胸に手をあて</div>
                            </div>
                            <div class="lyrics-line-container current">
                                <div class="lyrics-line-single kanji">恋をしたのは</div>
                            </div>
                            <div class="lyrics-line-container">
                                <div class="lyrics-line-single kanji">あなたのせいだ</div>
                            </div>
                            <div class="lyrics-line-container">
                                <div class="lyrics-line-single kanji">初めての気持ち</div>
                            </div>
                            <div class="lyrics-line-container">
                                <div class="lyrics-line-single kanji">君の前だとうまく言葉にできない</div>
                            </div>
                        </div>

                        <!-- 假名模式歌词 -->
                        <div class="lyrics-mode hidden" id="hiraganaMode">
                            <div class="lyrics-line-container past">
                                <div class="lyrics-line-single hiragana">むねにてをあて</div>
                            </div>
                            <div class="lyrics-line-container current">
                                <div class="lyrics-line-single hiragana">こいをしたのは</div>
                            </div>
                            <div class="lyrics-line-container">
                                <div class="lyrics-line-single hiragana">あなたのせいだ</div>
                            </div>
                            <div class="lyrics-line-container">
                                <div class="lyrics-line-single hiragana">はじめてのきもち</div>
                            </div>
                            <div class="lyrics-line-container">
                                <div class="lyrics-line-single hiragana">きみのまえだとうまくことばにできない</div>
                            </div>
                        </div>

                        <!-- 罗马音模式歌词 -->
                        <div class="lyrics-mode hidden" id="romajiMode">
                            <div class="lyrics-line-container past">
                                <div class="lyrics-line-single romaji">mune ni te wo ate</div>
                            </div>
                            <div class="lyrics-line-container current">
                                <div class="lyrics-line-single romaji">koi wo shita no wa</div>
                            </div>
                            <div class="lyrics-line-container">
                                <div class="lyrics-line-single romaji">anata no sei da</div>
                            </div>
                            <div class="lyrics-line-container">
                                <div class="lyrics-line-single romaji">hajimete no kimochi</div>
                            </div>
                            <div class="lyrics-line-container">
                                <div class="lyrics-line-single romaji">kimi no mae da to umaku kotoba ni dekinai</div>
                            </div>
                        </div>

                        <!-- 学习模式歌词 -->
                        <div class="lyrics-mode hidden" id="learningMode">
                            <div class="lyrics-line-container past">
                                <div class="lyrics-line-learning">
                                    <div class="lyrics-text-kanji">胸に手をあて</div>
                                    <div class="lyrics-text-hiragana">むねにてをあて</div>
                                    <div class="lyrics-text-romaji">mune ni te wo ate</div>
                                </div>
                            </div>
                            <div class="lyrics-line-container current">
                                <div class="lyrics-line-learning">
                                    <div class="lyrics-text-kanji">恋をしたのは</div>
                                    <div class="lyrics-text-hiragana">こいをしたのは</div>
                                    <div class="lyrics-text-romaji">koi wo shita no wa</div>
                                </div>
                            </div>
                            <div class="lyrics-line-container">
                                <div class="lyrics-line-learning">
                                    <div class="lyrics-text-kanji">あなたのせいだ</div>
                                    <div class="lyrics-text-hiragana">あなたのせいだ</div>
                                    <div class="lyrics-text-romaji">anata no sei da</div>
                                </div>
                            </div>
                            <div class="lyrics-line-container">
                                <div class="lyrics-line-learning">
                                    <div class="lyrics-text-kanji">初めての気持ち</div>
                                    <div class="lyrics-text-hiragana">はじめてのきもち</div>
                                    <div class="lyrics-text-romaji">hajimete no kimochi</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 控制区域 -->
                    <div class="lyrics-controls">
                        <button class="control-button" onclick="adjustTime(-2)" title="时间 -2s">-2s</button>
                        <div class="progress-container">
                            <div class="progress-bar">
                                <div class="progress-fill"></div>
                            </div>
                            <div class="time-display">
                                <span>02:30</span>
                                <span>04:15</span>
                            </div>
                        </div>
                        <button class="control-button" onclick="togglePlay()" title="暂停/播放">⏸️</button>
                        <button class="control-button" onclick="toggleFavorite()" title="收藏">♡</button>
                        <button class="control-button" onclick="showModal('设置页面开发中...')" title="设置">⚙️</button>
                    </div>
                </div>

                <!-- 底部导航 -->
                <div class="tab-navigator">
                    <div class="tab-item inactive" onclick="switchPage('homePage')">
                        <div class="tab-icon">🏠</div>
                        <div class="tab-label">首页</div>
                    </div>
                    <div class="tab-item active" onclick="switchPage('lyricsPage')">
                        <div class="tab-icon">📝</div>
                        <div class="tab-label">歌词</div>
                    </div>
                    <div class="tab-item inactive" onclick="switchPage('createPage')">
                        <div class="tab-icon">✨</div>
                        <div class="tab-label">创作</div>
                    </div>
                    <div class="tab-item inactive" onclick="switchPage('collectionPage')">
                        <div class="tab-icon">💾</div>
                        <div class="tab-label">收藏</div>
                    </div>
                    <div class="tab-item inactive" onclick="switchPage('profilePage')">
                        <div class="tab-icon">👤</div>
                        <div class="tab-label">我的</div>
                    </div>
                </div>
            </div>

            <!-- KTV模式页面 -->
            <div class="page hidden ktv-mode" id="ktvPage">
                <div class="ktv-song-info">
                    <h2>《恋》</h2>
                    <p>星野源</p>
                </div>

                <div class="ktv-lyrics-multilang" id="ktvLyricsDisplay">
                    <div class="ktv-text-kanji">恋をしたのは</div>
                    <div class="ktv-text-hiragana">こいをしたのは</div>
                    <div class="ktv-text-romaji">koi wo shita no wa</div>
                </div>

                <div class="ktv-lyrics-next">
                    <div style="text-align: center; color: var(--ktv-text-next); font-family: var(--font-japanese-serif);">
                        あなたのせいだ<br>
                        <span style="font-family: var(--font-japanese-sans); font-size: var(--text-lg); opacity: 0.8;">あなたのせいだ</span><br>
                        <span style="font-family: var(--font-romaji); font-size: var(--text-base); opacity: 0.6; font-style: italic;">anata no sei da</span>
                    </div>
                </div>

                <div class="ktv-progress">
                    <div class="ktv-progress-fill"></div>
                </div>

                <div class="ktv-controls">
                    <button class="ktv-control-button" onclick="togglePlay()">⏸️</button>
                    <button class="ktv-control-button" onclick="previousLine()">⏮️</button>
                    <button class="ktv-control-button" onclick="nextLine()">⏭️</button>
                    <button class="ktv-control-button" onclick="exitKTVMode()">❌</button>
                </div>
            </div>

            <!-- 创作页面 -->
            <div class="page hidden" id="createPage">
                <!-- 顶部工具栏 -->
                <div class="create-header">
                    <div class="create-title">AI手帐创作</div>
                    <div class="create-actions">
                        <button class="btn btn-secondary" onclick="showModal('保存功能开发中...')">💾 保存</button>
                        <button class="btn btn-primary" onclick="showModal('分享功能开发中...')">📤 分享</button>
                    </div>
                </div>

                <!-- 主要内容区域 -->
                <div class="create-content">
                    <!-- 画布区域 -->
                    <div class="canvas-area">
                        <div class="canvas">
                            <div class="canvas-content">
                                <h3>夜的第七章</h3>
                                <div class="lyrics-text">
                                    "凶手不在场<br>
                                    我翻阅相片<br>
                                    寻找你遗留的线索"
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- AI助手面板 -->
                    <div class="ai-assistant-panel">
                        <div class="ai-header">
                            🤖 AI创作助手
                        </div>
                        
                        <div style="margin-bottom: var(--space-3);">
                            <div style="font-size: var(--text-sm); color: var(--text-secondary); margin-bottom: var(--space-2);">💡 布局建议</div>
                            <div class="ai-suggestions">
                                <div class="ai-suggestion selected">📄</div>
                                <div class="ai-suggestion">🌅</div>
                                <div class="ai-suggestion">🎨</div>
                                <div class="ai-suggestion">✨</div>
                            </div>
                        </div>

                        <div>
                            <div style="font-size: var(--text-sm); color: var(--text-secondary); margin-bottom: var(--space-2);">🎨 色彩推荐</div>
                            <div class="ai-suggestions">
                                <div class="ai-suggestion" style="background: linear-gradient(45deg, #ff9a9e, #fecfef)"></div>
                                <div class="ai-suggestion" style="background: linear-gradient(45deg, #a8edea, #fed6e3)"></div>
                                <div class="ai-suggestion" style="background: linear-gradient(45deg, #667eea, #764ba2)"></div>
                                <div class="ai-suggestion" style="background: linear-gradient(45deg, #f093fb, #f5576c)"></div>
                            </div>
                        </div>
                    </div>

                    <!-- 工具栏 -->
                    <div class="toolbar">
                        <div class="toolbar-item">
                            <div class="toolbar-icon">📝</div>
                            <div class="toolbar-label">文字</div>
                        </div>
                        <div class="toolbar-item">
                            <div class="toolbar-icon">🎨</div>
                            <div class="toolbar-label">背景</div>
                        </div>
                        <div class="toolbar-item">
                            <div class="toolbar-icon">✨</div>
                            <div class="toolbar-label">装饰</div>
                        </div>
                        <div class="toolbar-item">
                            <div class="toolbar-icon">📐</div>
                            <div class="toolbar-label">布局</div>
                        </div>
                        <div class="toolbar-item">
                            <div class="toolbar-icon">🎯</div>
                            <div class="toolbar-label">图层</div>
                        </div>
                    </div>
                </div>

                <!-- 底部导航 -->
                <div class="tab-navigator">
                    <div class="tab-item inactive" onclick="switchPage('homePage')">
                        <div class="tab-icon">🏠</div>
                        <div class="tab-label">首页</div>
                    </div>
                    <div class="tab-item inactive" onclick="switchPage('lyricsPage')">
                        <div class="tab-icon">📝</div>
                        <div class="tab-label">歌词</div>
                    </div>
                    <div class="tab-item active" onclick="switchPage('createPage')">
                        <div class="tab-icon">✨</div>
                        <div class="tab-label">创作</div>
                    </div>
                    <div class="tab-item inactive" onclick="switchPage('collectionPage')">
                        <div class="tab-icon">💾</div>
                        <div class="tab-label">收藏</div>
                    </div>
                    <div class="tab-item inactive" onclick="switchPage('profilePage')">
                        <div class="tab-icon">👤</div>
                        <div class="tab-label">我的</div>
                    </div>
                </div>
            </div>

            <!-- 收藏页面 -->
            <div class="page hidden" id="collectionPage">
                <!-- 收藏夹选择 -->
                <div class="playlist-header">
                    <div class="playlist-selector" onclick="showPlaylistModal()">
                        <span class="playlist-name" id="currentPlaylistName">J-POPコレクション</span>
                        <span>▼</span>
                    </div>
                    <button class="add-playlist-btn" onclick="showAddPlaylistModal()">+</button>
                </div>

                <!-- 搜索头部 -->
                <div class="search-header">
                    <input type="text" class="japanese-search-input" placeholder="🔍 曲名・アーティスト検索...">
                    <div class="japanese-category-tabs">
                        <div class="category-tab active">全て</div>
                        <div class="category-tab j-pop">J-POP</div>
                        <div class="category-tab anime">アニメ</div>
                        <div class="category-tab learning">学習中</div>
                    </div>
                </div>

                <!-- 收藏内容 -->
                <div class="collection-content">
                    <div class="collection-list">
                        <div class="collection-item" onclick="switchPage('lyricsPage')">
                            <div class="item-cover">🎵</div>
                            <div class="item-info">
                                <h4>恋</h4>
                                <p>星野源 • 2時間前 • <span class="learning-status-badge learning">学習中</span></p>
                            </div>
                            <div class="item-actions">
                                <button class="action-button" onclick="event.stopPropagation(); toggleFavorite()">♡</button>
                                <button class="action-button" onclick="event.stopPropagation(); showModal('更多選択肢')">⋯</button>
                            </div>
                        </div>

                        <div class="collection-item">
                            <div class="item-cover">🎶</div>
                            <div class="item-info">
                                <h4>前前前世</h4>
                                <p>RADWIMPS • 昨日 • <span class="learning-status-badge mastered">習得済み</span></p>
                            </div>
                            <div class="item-actions">
                                <button class="action-button">♡</button>
                                <button class="action-button">⋯</button>
                            </div>
                        </div>

                        <div class="collection-item">
                            <div class="item-cover">🎼</div>
                            <div class="item-info">
                                <h4>打上花火</h4>
                                <p>DAOKO×米津玄師 • 3日前 • <span class="learning-status-badge not-started">未開始</span></p>
                            </div>
                            <div class="item-actions">
                                <button class="action-button">♡</button>
                                <button class="action-button">⋯</button>
                            </div>
                        </div>

                        <div class="collection-item">
                            <div class="item-cover">✨</div>
                            <div class="item-info">
                                <h4>恋 手帳</h4>
                                <p>私の作品 • 2時間前</p>
                            </div>
                            <div class="item-actions">
                                <button class="action-button" onclick="event.stopPropagation(); switchPage('createPage')">✏️</button>
                                <button class="action-button">⋯</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 底部导航 -->
                <div class="tab-navigator">
                    <div class="tab-item inactive" onclick="switchPage('homePage')">
                        <div class="tab-icon">🏠</div>
                        <div class="tab-label">首页</div>
                    </div>
                    <div class="tab-item inactive" onclick="switchPage('lyricsPage')">
                        <div class="tab-icon">📝</div>
                        <div class="tab-label">歌词</div>
                    </div>
                    <div class="tab-item inactive" onclick="switchPage('createPage')">
                        <div class="tab-icon">✨</div>
                        <div class="tab-label">创作</div>
                    </div>
                    <div class="tab-item active" onclick="switchPage('collectionPage')">
                        <div class="tab-icon">💾</div>
                        <div class="tab-label">收藏</div>
                    </div>
                    <div class="tab-item inactive" onclick="switchPage('profilePage')">
                        <div class="tab-icon">👤</div>
                        <div class="tab-label">我的</div>
                    </div>
                </div>
            </div>

            <!-- 个人中心页面 -->
            <div class="page hidden" id="profilePage">
                <!-- 个人信息头部 -->
                <div class="profile-header">
                    <div class="profile-avatar">👤</div>
                    <div class="profile-name">音乐爱好者</div>
                    <div class="profile-stats">
                        <div class="stat-item">
                            <span class="stat-number">156</span>
                            <span class="stat-label">识别歌曲</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-number">42</span>
                            <span class="stat-label">收藏歌曲</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-number">8</span>
                            <span class="stat-label">手帐作品</span>
                        </div>
                    </div>
                </div>

                <!-- 个人中心内容 -->
                <div class="profile-content">
                    <div class="profile-menu">
                        <div class="menu-section">
                            <div class="menu-item" onclick="showModal('AI设置开发中...')">
                                <div class="menu-icon">🤖</div>
                                <div class="menu-text">AI设置</div>
                                <div class="menu-arrow">›</div>
                            </div>
                            <div class="menu-item" onclick="showModal('KTV设置开发中...')">
                                <div class="menu-icon">🎤</div>
                                <div class="menu-text">KTV模式设置</div>
                                <div class="menu-arrow">›</div>
                            </div>
                            <div class="menu-item" onclick="showModal('歌词设置开发中...')">
                                <div class="menu-icon">📝</div>
                                <div class="menu-text">歌词显示设置</div>
                                <div class="menu-arrow">›</div>
                            </div>
                        </div>

                        <div class="menu-section">
                            <div class="menu-item" onclick="showModal('数据统计开发中...')">
                                <div class="menu-icon">📊</div>
                                <div class="menu-text">我的数据</div>
                                <div class="menu-arrow">›</div>
                            </div>
                            <div class="menu-item" onclick="showModal('备份功能开发中...')">
                                <div class="menu-icon">☁️</div>
                                <div class="menu-text">数据备份</div>
                                <div class="menu-arrow">›</div>
                            </div>
                            <div class="menu-item" onclick="showModal('分享功能开发中...')">
                                <div class="menu-icon">📤</div>
                                <div class="menu-text">分享应用</div>
                                <div class="menu-arrow">›</div>
                            </div>
                        </div>

                        <div class="menu-section">
                            <div class="menu-item" onclick="showModal('帮助文档开发中...')">
                                <div class="menu-icon">❓</div>
                                <div class="menu-text">帮助与反馈</div>
                                <div class="menu-arrow">›</div>
                            </div>
                            <div class="menu-item" onclick="showModal('关于页面开发中...')">
                                <div class="menu-icon">ℹ️</div>
                                <div class="menu-text">关于LyricNote</div>
                                <div class="menu-arrow">›</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 底部导航 -->
                <div class="tab-navigator">
                    <div class="tab-item inactive" onclick="switchPage('homePage')">
                        <div class="tab-icon">🏠</div>
                        <div class="tab-label">首页</div>
                    </div>
                    <div class="tab-item inactive" onclick="switchPage('lyricsPage')">
                        <div class="tab-icon">📝</div>
                        <div class="tab-label">歌词</div>
                    </div>
                    <div class="tab-item inactive" onclick="switchPage('createPage')">
                        <div class="tab-icon">✨</div>
                        <div class="tab-label">创作</div>
                    </div>
                    <div class="tab-item inactive" onclick="switchPage('collectionPage')">
                        <div class="tab-icon">💾</div>
                        <div class="tab-label">收藏</div>
                    </div>
                    <div class="tab-item active" onclick="switchPage('profilePage')">
                        <div class="tab-icon">👤</div>
                        <div class="tab-label">我的</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 安全区域 -->
        <div class="safe-area-bottom"></div>
    </div>

    <!-- 模态框 -->
    <div class="modal-overlay" id="modalOverlay" onclick="hideModal()">
        <div class="modal" onclick="event.stopPropagation()">
            <h3 style="margin-bottom: var(--space-4); color: var(--primary-500);">提示</h3>
            <p id="modalText" style="margin-bottom: var(--space-6); color: var(--text-secondary);">这是一个提示信息</p>
            <div style="display: flex; justify-content: flex-end; gap: var(--space-3);">
                <button class="btn btn-primary" onclick="hideModal()">确定</button>
            </div>
        </div>
    </div>

    <script>
        // 全局状态
        let currentPage = 'homePage';
        let isRecording = false;
        let isPlaying = false;
        let isFavorite = false;
        let isKTVMode = false; // 全局KTV模式开关
        let currentLanguage = 'kanji'; // 当前语言模式: kanji, hiragana, romaji, learning
        let currentPlaylist = 'j-pop'; // 当前默认收藏夹
        let playlists = {
            'j-pop': { name: 'J-POPコレクション', songs: [] },
            'anime': { name: 'アニメソング', songs: [] },
            'learning': { name: '学習中', songs: [] }
        };

        // 日语歌词数据
        let japaneseStringData = {
            statusTexts: {
                default: '日本の音楽を認識する',
                recording: '録音中... ({count}s)',
                recognizing: 'AI認識中...',
                success: '認識成功！'
            },
            lyrics: {
                kanji: [
                    '胸に手をあて',
                    '恋をしたのは', 
                    'あなたのせいだ',
                    '初めての気持ち',
                    '君の前だとうまく言葉にできない'
                ],
                hiragana: [
                    'むねにてをあて',
                    'こいをしたのは',
                    'あなたのせいだ', 
                    'はじめてのきもち',
                    'きみのまえだとうまくことばにできない'
                ],
                romaji: [
                    'mune ni te wo ate',
                    'koi wo shita no wa',
                    'anata no sei da',
                    'hajimete no kimochi', 
                    'kimi no mae da to umaku kotoba ni dekinai'
                ]
            }
        };

        // 页面切换函数
        function switchPage(pageId) {
            // 隐藏当前页面
            document.getElementById(currentPage).classList.add('hidden');
            
            // 显示新页面
            document.getElementById(pageId).classList.remove('hidden');
            
            // 更新导航状态
            updateTabNavigator(pageId);
            
            // 更新当前页面状态
            currentPage = pageId;

            // 退出KTV模式（如果不是切换到KTV页面）
            if (pageId !== 'ktvPage') {
                isKTVMode = false;
            }
        }

        // 更新底部导航状态
        function updateTabNavigator(activePageId) {
            const tabMap = {
                'homePage': 0,
                'lyricsPage': 1,
                'createPage': 2,
                'collectionPage': 3,
                'profilePage': 4
            };

            // 获取所有页面的导航栏
            const navigators = document.querySelectorAll('.tab-navigator');
            
            navigators.forEach(navigator => {
                const tabs = navigator.querySelectorAll('.tab-item');
                tabs.forEach((tab, index) => {
                    if (index === tabMap[activePageId]) {
                        tab.classList.remove('inactive');
                        tab.classList.add('active');
                    } else {
                        tab.classList.remove('active');
                        tab.classList.add('inactive');
                    }
                });
            });
        }

        // 语言切换函数
        function switchLanguage(language) {
            currentLanguage = language;
            
            // 更新语言切换按钮状态
            const languageTabs = document.querySelectorAll('.language-tab');
            languageTabs.forEach(tab => {
                tab.classList.remove('active');
            });
            
            // 激活当前语言按钮
            const activeTab = document.querySelector(`[onclick="switchLanguage('${language}')"]`);
            if (activeTab) {
                activeTab.classList.add('active');
            }
            
            // 显示对应语言的歌词
            const allModes = document.querySelectorAll('.lyrics-mode');
            allModes.forEach(mode => mode.classList.add('hidden'));
            
            let targetModeId;
            switch(language) {
                case 'kanji':
                    targetModeId = 'kanjiMode';
                    break;
                case 'hiragana':
                    targetModeId = 'hiraganaMode';
                    break;
                case 'romaji':
                    targetModeId = 'romajiMode';
                    break;
                case 'learning':
                    targetModeId = 'learningMode';
                    break;
            }
            
            const targetMode = document.getElementById(targetModeId);
            if (targetMode) {
                targetMode.classList.remove('hidden');
                targetMode.classList.add('switching');
                setTimeout(() => {
                    targetMode.classList.remove('switching');
                }, 300);
            }
            
            // 更新KTV模式显示
            updateKTVDisplay();
        }

        // 更新KTV显示
        function updateKTVDisplay() {
            const ktvDisplay = document.getElementById('ktvLyricsDisplay');
            if (!ktvDisplay) return;
            
            const currentIndex = 1; // 当前歌词索引
            
            if (currentLanguage === 'learning' || !currentLanguage || currentLanguage === 'kanji') {
                // 显示多语言KTV模式
                ktvDisplay.innerHTML = `
                    <div class="ktv-text-kanji">${japaneseStringData.lyrics.kanji[currentIndex]}</div>
                    <div class="ktv-text-hiragana">${japaneseStringData.lyrics.hiragana[currentIndex]}</div>
                    <div class="ktv-text-romaji">${japaneseStringData.lyrics.romaji[currentIndex]}</div>
                `;
            } else {
                // 显示单语言KTV模式
                let text, className;
                switch(currentLanguage) {
                    case 'kanji':
                        text = japaneseStringData.lyrics.kanji[currentIndex];
                        className = 'ktv-text-kanji';
                        break;
                    case 'hiragana':
                        text = japaneseStringData.lyrics.hiragana[currentIndex];
                        className = 'ktv-text-hiragana';
                        break;
                    case 'romaji':
                        text = japaneseStringData.lyrics.romaji[currentIndex];
                        className = 'ktv-text-romaji';
                        break;
                }
                ktvDisplay.innerHTML = `<div class="${className}">${text}</div>`;
            }
        }

        // 开始识别
        function startRecognition() {
            const btn = document.getElementById('recognitionBtn');
            const statusText = document.getElementById('statusText');
            
            if (isRecording) return;
            
            isRecording = true;
            btn.classList.add('recording');
            
            // 模拟录音过程
            let countdown = 5;
            statusText.textContent = japaneseStringData.statusTexts.recording.replace('{count}', countdown);
            
            const countInterval = setInterval(() => {
                countdown--;
                statusText.textContent = japaneseStringData.statusTexts.recording.replace('{count}', countdown);
                
                if (countdown <= 0) {
                    clearInterval(countInterval);
                    // 模拟识别过程
                    statusText.textContent = japaneseStringData.statusTexts.recognizing;
                    
                    setTimeout(() => {
                        btn.classList.remove('recording');
                        statusText.textContent = japaneseStringData.statusTexts.success;
                        
                        setTimeout(() => {
                            switchPage('lyricsPage');
                            statusText.textContent = japaneseStringData.statusTexts.default;
                            isRecording = false;
                        }, 1000);
                    }, 2000);
                }
            }, 1000);
        }

        // 切换到KTV模式
        function switchToKTVMode() {
            switchPage('lyricsPage');
            setTimeout(() => {
                switchPage('ktvPage');
                isKTVMode = true;
            }, 300);
        }

        // 退出KTV模式
        function exitKTVMode() {
            switchPage('lyricsPage');
            isKTVMode = false;
        }

        // 切换KTV模式
        function toggleKTVMode() {
            if (isKTVMode) {
                exitKTVMode();
            } else {
                switchToKTVMode();
            }
        }

        // 播放控制
        function togglePlay() {
            isPlaying = !isPlaying;
            // 更新播放按钮状态
            const playButtons = document.querySelectorAll('[onclick="togglePlay()"]');
            playButtons.forEach(btn => {
                btn.textContent = isPlaying ? '⏸️' : '▶️';
            });
        }

        // 收藏切换
        function toggleFavorite() {
            isFavorite = !isFavorite;
            const favoriteButtons = document.querySelectorAll('[onclick*="toggleFavorite"]');
            favoriteButtons.forEach(btn => {
                if (btn.textContent.includes('♡')) {
                    btn.textContent = isFavorite ? '♥️' : '♡';
                }
            });
            
            if (isFavorite) {
                showModal('已添加到收藏夹');
            } else {
                showModal('已从收藏夹移除');
            }
        }

        // 时间调整
        function adjustTime(seconds) {
            showModal(`时间已调整 ${seconds > 0 ? '+' : ''}${seconds}s`);
        }

        // 上一句/下一句
        function previousLine() {
            showModal('上一句歌词');
        }

        function nextLine() {
            showModal('下一句歌词');
        }

        // 模态框显示
        function showModal(message) {
            const overlay = document.getElementById('modalOverlay');
            const text = document.getElementById('modalText');
            text.textContent = message;
            overlay.classList.add('show');
        }

        // 模态框隐藏
        function hideModal() {
            const overlay = document.getElementById('modalOverlay');
            overlay.classList.remove('show');
        }

        // 歌词动画（模拟实时同步）
        function simulateLyricsSync() {
            const lines = document.querySelectorAll('.lyrics-line');
            let currentIndex = 2; // 当前高亮的歌词索引
            
            setInterval(() => {
                if (currentPage === 'lyricsPage' && isPlaying) {
                    // 重置所有歌词状态
                    lines.forEach((line, index) => {
                        line.classList.remove('current', 'next', 'past');
                        if (index < currentIndex) {
                            line.classList.add('past');
                        } else if (index === currentIndex) {
                            line.classList.add('current');
                        } else if (index === currentIndex + 1) {
                            line.classList.add('next');
                        }
                    });
                    
                    currentIndex = (currentIndex + 1) % lines.length;
                }
            }, 4000); // 每4秒切换一次歌词
        }

        // 进度条动画
        function animateProgress() {
            const progressFills = document.querySelectorAll('.progress-fill, .ktv-progress-fill');
            let progress = 35;
            
            setInterval(() => {
                if (isPlaying) {
                    progress += 0.5;
                    if (progress > 100) progress = 0;
                    
                    progressFills.forEach(fill => {
                        fill.style.width = progress + '%';
                    });
                }
            }, 1000);
        }

        // AI建议交互
        function setupAISuggestions() {
            const suggestions = document.querySelectorAll('.ai-suggestion');
            suggestions.forEach(suggestion => {
                suggestion.addEventListener('click', () => {
                    suggestions.forEach(s => s.classList.remove('selected'));
                    suggestion.classList.add('selected');
                    showModal('AI建议已应用');
                });
            });
        }

        // 筛选标签交互
        function setupFilterTabs() {
            const tabs = document.querySelectorAll('.filter-tab');
            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    tabs.forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');
                });
            });
        }

        // 工具栏交互
        function setupToolbar() {
            const toolbarItems = document.querySelectorAll('.toolbar-item');
            toolbarItems.forEach(item => {
                item.addEventListener('click', () => {
                    const label = item.querySelector('.toolbar-label').textContent;
                    showModal(`${label}工具开发中...`);
                });
            });
        }

        // 初始化
        document.addEventListener('DOMContentLoaded', () => {
            // 启动歌词同步动画
            simulateLyricsSync();
            
            // 启动进度条动画
            animateProgress();
            
            // 设置AI建议交互
            setupAISuggestions();
            
            // 设置筛选标签交互
            setupFilterTabs();
            
            // 设置工具栏交互
            setupToolbar();
            
            // 添加触摸反馈
            const buttons = document.querySelectorAll('button, .tab-item, .quick-action, .menu-item');
            buttons.forEach(button => {
                button.addEventListener('touchstart', () => {
                    button.style.transform = 'scale(0.95)';
                });
                
                button.addEventListener('touchend', () => {
                    button.style.transform = '';
                });
            });
        });

        // 键盘快捷键
        document.addEventListener('keydown', (e) => {
            switch(e.key) {
                case '1':
                    switchPage('homePage');
                    break;
                case '2':
                    switchPage('lyricsPage');
                    break;
                case '3':
                    switchPage('createPage');
                    break;
                case '4':
                    switchPage('collectionPage');
                    break;
                case '5':
                    switchPage('profilePage');
                    break;
                case ' ':
                    e.preventDefault();
                    togglePlay();
                    break;
                case 'k':
                    toggleKTVMode();
                    break;
                case 'f':
                    toggleFavorite();
                    break;
            }
        });
    </script>
</body>
</html>
