<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LyricNote - Êó•ËØ≠AIÊô∫ËÉΩÂê¨Ê≠åËØÜÊõ≤App È´ò‰øùÁúüÂéüÂûã</title>
    <style>
        /* ===== CSSÂèòÈáè - ËÆæËÆ°Á≥ªÁªü ===== */
        :root {
            /* ‰∏ªËâ≤Ë∞É */
            --primary-500: #8B5CF6;
            --primary-400: #A78BFA;
            --primary-600: #7C3AED;
            --primary-300: #C4B5FD;
            --primary-700: #6D28D9;
            
            /* ËæÖÂä©Ëâ≤ */
            --secondary-500: #F97316;
            --secondary-400: #FB923C;
            --secondary-600: #EA580C;
            
            /* Ê≠åËØçÂêåÊ≠•Ëâ≤ */
            --sync-500: #3B82F6;
            --sync-400: #60A5FA;
            --sync-600: #2563EB;
            
            /* ÊñáÂ≠óÈ¢úËâ≤ */
            --text-primary: #1F2937;
            --text-secondary: #6B7280;
            --text-tertiary: #9CA3AF;
            --text-inverse: #FFFFFF;
            
            /* ËÉåÊôØËâ≤ */
            --bg-primary: #FFFFFF;
            --bg-secondary: #F9FAFB;
            --bg-tertiary: #F3F4F6;
            --bg-dark: #111827;
            
            /* ËæπÊ°ÜÈ¢úËâ≤ */
            --border-light: #E5E7EB;
            --border-medium: #D1D5DB;
            --border-dark: #9CA3AF;
            
            /* KTVÊ®°ÂºèËâ≤ÂΩ© */
            --ktv-bg: #000000;
            --ktv-text-current: #FFD700;
            --ktv-text-next: #FFFFFF;
            --ktv-text-past: #666666;
            --ktv-progress: #FF6B6B;
            
            /* Â≠ó‰ΩìÂ§ßÂ∞è */
            --text-4xl: 36px;
            --text-3xl: 30px;
            --text-2xl: 24px;
            --text-xl: 20px;
            --text-lg: 18px;
            --text-base: 16px;
            --text-sm: 14px;
            --text-xs: 12px;
            --text-ktv-xl: 48px;
            --text-ktv-lg: 36px;
            --text-ktv-md: 24px;
            
            /* Êó•ËØ≠Â≠ó‰Ωì */
            --font-japanese-serif: 'Hiragino Mincho ProN', 'Yu Mincho', 'MS PMincho', serif;
            --font-japanese-sans: 'Hiragino Sans', 'Meiryo', 'Yu Gothic', 'MS PGothic', sans-serif;
            --font-romaji: 'SF Pro Display', -apple-system, BlinkMacSystemFont, sans-serif;
            
            /* Èó¥Ë∑ù */
            --space-1: 4px;
            --space-2: 8px;
            --space-3: 12px;
            --space-4: 16px;
            --space-5: 20px;
            --space-6: 24px;
            --space-8: 32px;
            --space-10: 40px;
            --space-12: 48px;
            
            /* ÂúÜËßí */
            --radius-sm: 4px;
            --radius-md: 8px;
            --radius-lg: 12px;
            --radius-xl: 16px;
            --radius-full: 9999px;
            
            /* Èò¥ÂΩ± */
            --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);
            --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.07);
            --shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.1);
            --shadow-xl: 0 20px 25px rgba(0, 0, 0, 0.1);
        }

        /* ===== Âü∫Á°ÄÊ†∑ÂºèÈáçÁΩÆ ===== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'PingFang SC', 'SF Pro Display', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-secondary);
            color: var(--text-primary);
            overflow-x: hidden;
        }

        /* ===== ÂÆπÂô®Ê†∑Âºè ===== */
        .phone-container {
            width: 393px;
            height: 852px;
            margin: 20px auto;
            background: var(--bg-primary);
            border-radius: 40px;
            box-shadow: var(--shadow-xl);
            overflow: hidden;
            position: relative;
            border: 8px solid #000;
        }

        .status-bar {
            height: 44px;
            background: var(--bg-primary);
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 var(--space-4);
            font-size: var(--text-sm);
            font-weight: 600;
        }

        .screen {
            height: calc(852px - 44px - 34px);
            overflow: hidden;
            position: relative;
        }

        .safe-area-bottom {
            height: 34px;
            background: var(--bg-primary);
        }

        /* ===== È°µÈù¢ÂÆπÂô® ===== */
        .page {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            transition: transform 0.3s ease-in-out;
            display: flex;
            flex-direction: column;
        }

        .page.hidden {
            transform: translateX(100%);
        }

        .page.slide-left {
            transform: translateX(-100%);
        }

        /* ===== ÂØºËà™Ê†è ===== */
        .nav-header {
            height: 56px;
            background: var(--bg-primary);
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 var(--space-4);
            border-bottom: 1px solid var(--border-light);
        }

        .nav-title {
            font-size: var(--text-xl);
            font-weight: 700;
            color: var(--primary-500);
            display: flex;
            align-items: center;
            gap: var(--space-2);
        }

        .nav-actions {
            display: flex;
            gap: var(--space-3);
        }

        .nav-icon {
            width: 24px;
            height: 24px;
            cursor: pointer;
            color: var(--text-secondary);
            transition: color 0.2s ease;
        }

        .nav-icon:hover {
            color: var(--primary-500);
        }

        /* ===== Â∫ïÈÉ®ÂØºËà™ ===== */
        .tab-navigator {
            background: var(--bg-primary);
            border-top: 1px solid var(--border-light);
            padding: var(--space-2) 0;
            display: flex;
            justify-content: space-around;
            align-items: center;
            height: 83px;
        }

        .tab-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: var(--space-1);
            padding: var(--space-2);
            border-radius: var(--radius-md);
            transition: all 0.2s ease;
            cursor: pointer;
            min-width: 60px;
        }

        .tab-item.active {
            color: var(--primary-500);
            background: rgba(139, 92, 246, 0.1);
        }

        .tab-item.inactive {
            color: var(--text-tertiary);
        }

        .tab-icon {
            width: 24px;
            height: 24px;
            font-size: 20px;
        }

        .tab-label {
            font-size: var(--text-xs);
            font-weight: 500;
        }

        /* ===== ÊåâÈíÆÁªÑ‰ª∂ ===== */
        .btn {
            padding: var(--space-3) var(--space-5);
            border-radius: var(--radius-lg);
            font-size: var(--text-base);
            font-weight: 600;
            border: none;
            cursor: pointer;
            transition: all 0.2s ease;
            text-decoration: none;
            text-align: center;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: var(--space-2);
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary-500), var(--primary-600));
            color: var(--text-inverse);
            box-shadow: var(--shadow-md);
        }

        .btn-primary:hover {
            transform: translateY(-1px);
            box-shadow: var(--shadow-lg);
        }

        .btn-primary:active {
            transform: translateY(0);
            box-shadow: var(--shadow-sm);
        }

        .btn-secondary {
            background: transparent;
            color: var(--primary-500);
            border: 2px solid var(--primary-500);
        }

        /* ===== È¶ñÈ°µÊ†∑Âºè ===== */
        .home-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: var(--space-6);
        }

        .recognition-area {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: var(--space-6);
            margin-bottom: var(--space-10);
        }

        .recognition-button {
            width: 240px;
            height: 240px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary-500), var(--secondary-500));
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: var(--shadow-xl);
            position: relative;
            overflow: hidden;
        }

        .recognition-button:hover {
            transform: scale(1.05);
        }

        .recognition-button:active {
            transform: scale(0.95);
        }

        .recognition-button.recording {
            animation: recording-pulse 2s infinite;
        }

        @keyframes recording-pulse {
            0% {
                transform: scale(1);
                box-shadow: 0 0 0 0 rgba(139, 92, 246, 0.7);
            }
            70% {
                transform: scale(1.05);
                box-shadow: 0 0 0 20px rgba(139, 92, 246, 0);
            }
            100% {
                transform: scale(1);
                box-shadow: 0 0 0 0 rgba(139, 92, 246, 0);
            }
        }

        .mic-icon {
            width: 48px;
            height: 48px;
            color: white;
            font-size: 48px;
        }

        .status-text {
            font-size: var(--text-lg);
            color: var(--text-secondary);
            text-align: center;
            max-width: 300px;
        }

        .quick-actions {
            display: flex;
            gap: var(--space-4);
            margin-top: var(--space-8);
        }

        .quick-action {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: var(--space-2);
            padding: var(--space-4);
            background: var(--bg-primary);
            border-radius: var(--radius-xl);
            box-shadow: var(--shadow-md);
            cursor: pointer;
            transition: all 0.2s ease;
            min-width: 80px;
        }

        .quick-action:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .quick-action-icon {
            width: 32px;
            height: 32px;
            color: var(--primary-500);
            font-size: 24px;
        }

        .quick-action-text {
            font-size: var(--text-sm);
            color: var(--text-secondary);
        }

        /* ===== Ê≠åËØçÈ°µÈù¢Ê†∑Âºè ===== */
        .lyrics-content {
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .song-info {
            background: linear-gradient(135deg, var(--primary-500), var(--secondary-500));
            color: white;
            padding: var(--space-6);
            display: flex;
            align-items: center;
            gap: var(--space-4);
        }

        .song-cover {
            width: 80px;
            height: 80px;
            border-radius: var(--radius-md);
            background: rgba(255, 255, 255, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
        }

        .song-details h2 {
            font-size: var(--text-2xl);
            margin-bottom: var(--space-1);
        }

        .song-details p {
            font-size: var(--text-base);
            opacity: 0.9;
        }

        .lyrics-scroll-area {
            flex: 1;
            padding: var(--space-6) var(--space-4);
            overflow-y: auto;
            background: var(--bg-primary);
        }

        .lyrics-line {
            padding: var(--space-3) 0;
            transition: all 0.3s ease;
            text-align: center;
            line-height: 1.6;
            cursor: pointer;
        }

        .lyrics-line.current {
            color: var(--sync-500);
            font-size: var(--text-xl);
            font-weight: 600;
            text-shadow: 0 2px 4px rgba(59, 130, 246, 0.3);
            transform: scale(1.05);
        }

        .lyrics-line.next {
            color: var(--text-primary);
            font-size: var(--text-lg);
        }

        .lyrics-line.past {
            color: var(--text-tertiary);
            font-size: var(--text-base);
            opacity: 0.6;
        }

        .lyrics-controls {
            background: var(--bg-primary);
            padding: var(--space-4);
            border-top: 1px solid var(--border-light);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .progress-container {
            flex: 1;
            margin: 0 var(--space-4);
        }

        .progress-bar {
            width: 100%;
            height: 4px;
            background: var(--border-light);
            border-radius: var(--radius-full);
            position: relative;
            margin-bottom: var(--space-2);
        }

        .progress-fill {
            height: 100%;
            background: var(--sync-500);
            border-radius: var(--radius-full);
            width: 35%;
            transition: width 0.3s ease;
        }

        .time-display {
            display: flex;
            justify-content: space-between;
            font-size: var(--text-xs);
            color: var(--text-secondary);
        }

        .control-button {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: none;
            background: var(--bg-secondary);
            color: var(--text-secondary);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
        }

        .control-button:hover {
            background: var(--primary-500);
            color: white;
        }

        /* ===== KTVÊ®°ÂºèÊ†∑Âºè ===== */
        .ktv-mode {
            background: var(--ktv-bg);
            color: var(--ktv-text-next);
            padding: var(--space-8);
            text-align: center;
        }

        .ktv-song-info {
            margin-bottom: var(--space-8);
        }

        .ktv-song-info h2 {
            font-size: var(--text-3xl);
            color: var(--ktv-text-current);
            margin-bottom: var(--space-2);
        }

        .ktv-song-info p {
            font-size: var(--text-xl);
            opacity: 0.8;
        }

        .ktv-lyrics-current {
            font-size: var(--text-ktv-xl);
            color: var(--ktv-text-current);
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
            margin-bottom: var(--space-6);
            min-height: 120px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .ktv-lyrics-next {
            font-size: var(--text-ktv-lg);
            color: var(--ktv-text-next);
            opacity: 0.7;
            margin-bottom: var(--space-8);
        }

        .ktv-progress {
            height: 8px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: var(--radius-full);
            margin-bottom: var(--space-8);
        }

        .ktv-progress-fill {
            height: 100%;
            background: var(--ktv-progress);
            border-radius: var(--radius-full);
            width: 35%;
            transition: width 0.3s ease;
        }

        .ktv-controls {
            display: flex;
            justify-content: center;
            gap: var(--space-6);
        }

        .ktv-control-button {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            border: 2px solid var(--ktv-text-next);
            background: transparent;
            color: var(--ktv-text-next);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            transition: all 0.2s ease;
        }

        .ktv-control-button:hover {
            background: var(--ktv-text-current);
            color: var(--ktv-bg);
        }

        /* ===== Âàõ‰ΩúÈ°µÈù¢Ê†∑Âºè ===== */
        .create-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            background: var(--bg-secondary);
        }

        .create-header {
            background: var(--bg-primary);
            padding: var(--space-4);
            border-bottom: 1px solid var(--border-light);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .create-title {
            font-size: var(--text-lg);
            font-weight: 600;
        }

        .create-actions {
            display: flex;
            gap: var(--space-3);
        }

        .canvas-area {
            flex: 1;
            padding: var(--space-4);
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .canvas {
            width: 270px;
            height: 480px;
            background: white;
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-lg);
            position: relative;
            overflow: hidden;
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 50%, #fecfef 100%);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: var(--space-6);
        }

        .canvas-content {
            color: white;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        .canvas-content h3 {
            font-size: var(--text-2xl);
            margin-bottom: var(--space-4);
            font-weight: 700;
        }

        .canvas-content .lyrics-text {
            font-size: var(--text-lg);
            line-height: 1.8;
            font-style: italic;
        }

        .ai-assistant-panel {
            background: var(--bg-primary);
            border-top: 1px solid var(--border-light);
            padding: var(--space-4);
        }

        .ai-header {
            display: flex;
            align-items: center;
            gap: var(--space-2);
            margin-bottom: var(--space-4);
            color: var(--primary-500);
            font-weight: 600;
        }

        .ai-suggestions {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: var(--space-2);
            margin-bottom: var(--space-4);
        }

        .ai-suggestion {
            aspect-ratio: 1;
            background: var(--bg-secondary);
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
            border: 2px solid transparent;
        }

        .ai-suggestion:hover {
            border-color: var(--primary-500);
            transform: scale(1.05);
        }

        .ai-suggestion.selected {
            border-color: var(--primary-500);
            background: rgba(139, 92, 246, 0.1);
        }

        .toolbar {
            background: var(--bg-primary);
            border-top: 1px solid var(--border-light);
            padding: var(--space-3);
            display: flex;
            justify-content: space-around;
            align-items: center;
        }

        .toolbar-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: var(--space-1);
            cursor: pointer;
            padding: var(--space-2);
            border-radius: var(--radius-md);
            transition: all 0.2s ease;
        }

        .toolbar-item:hover {
            background: rgba(139, 92, 246, 0.1);
            color: var(--primary-500);
        }

        .toolbar-icon {
            font-size: 20px;
        }

        .toolbar-label {
            font-size: var(--text-xs);
        }

        /* ===== Êî∂ËóèÈ°µÈù¢Ê†∑Âºè ===== */
        .collection-content {
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .search-header {
            background: var(--bg-primary);
            padding: var(--space-4);
            border-bottom: 1px solid var(--border-light);
        }

        .search-input {
            background: var(--bg-secondary);
            border: 2px solid var(--border-light);
            border-radius: var(--radius-full);
            padding: var(--space-3) var(--space-4);
            font-size: var(--text-base);
            width: 100%;
            transition: all 0.2s ease;
        }

        .search-input:focus {
            border-color: var(--primary-500);
            box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.1);
            outline: none;
        }

        .filter-tabs {
            display: flex;
            gap: var(--space-2);
            margin-top: var(--space-4);
        }

        .filter-tab {
            padding: var(--space-2) var(--space-4);
            border-radius: var(--radius-full);
            background: var(--bg-secondary);
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: var(--text-sm);
        }

        .filter-tab.active {
            background: var(--primary-500);
            color: white;
        }

        .collection-list {
            flex: 1;
            padding: var(--space-4);
            overflow-y: auto;
        }

        .collection-item {
            background: var(--bg-primary);
            border-radius: var(--radius-xl);
            padding: var(--space-4);
            margin-bottom: var(--space-3);
            box-shadow: var(--shadow-sm);
            display: flex;
            align-items: center;
            gap: var(--space-3);
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .collection-item:hover {
            transform: translateY(-1px);
            box-shadow: var(--shadow-md);
        }

        .item-cover {
            width: 60px;
            height: 60px;
            border-radius: var(--radius-md);
            background: linear-gradient(135deg, var(--primary-500), var(--secondary-500));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 24px;
        }

        .item-info {
            flex: 1;
        }

        .item-info h4 {
            font-size: var(--text-base);
            color: var(--text-primary);
            margin-bottom: var(--space-1);
        }

        .item-info p {
            font-size: var(--text-sm);
            color: var(--text-secondary);
        }

        .item-actions {
            display: flex;
            gap: var(--space-2);
        }

        .action-button {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            border: none;
            background: var(--bg-secondary);
            color: var(--text-secondary);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
        }

        .action-button:hover {
            background: var(--primary-500);
            color: white;
        }

        /* ===== KTVÂºÄÂÖ≥Ê†∑Âºè ===== */
        .ktv-toggle-section {
            margin-top: var(--space-8);
            padding: var(--space-4);
        }

        .toggle-container {
            background: var(--bg-primary);
            border-radius: var(--radius-xl);
            padding: var(--space-4);
            box-shadow: var(--shadow-md);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .toggle-label {
            display: flex;
            align-items: center;
            gap: var(--space-3);
        }

        .toggle-icon {
            width: 48px;
            height: 48px;
            background: linear-gradient(135deg, var(--primary-500), var(--secondary-500));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
        }

        .toggle-text {
            display: flex;
            flex-direction: column;
        }

        .toggle-title {
            font-size: var(--text-lg);
            font-weight: 600;
            color: var(--text-primary);
        }

        .toggle-desc {
            font-size: var(--text-sm);
            color: var(--text-secondary);
        }

        .toggle-switch {
            width: 60px;
            height: 32px;
            background: var(--border-medium);
            border-radius: var(--radius-full);
            position: relative;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .toggle-switch.active {
            background: var(--primary-500);
        }

        .toggle-slider {
            width: 28px;
            height: 28px;
            background: white;
            border-radius: 50%;
            position: absolute;
            top: 2px;
            left: 2px;
            transition: all 0.3s ease;
            box-shadow: var(--shadow-sm);
        }

        .toggle-switch.active .toggle-slider {
            transform: translateX(28px);
        }

        /* ===== Êî∂ËóèÂ§πÁÆ°ÁêÜÊ†∑Âºè ===== */
        .playlist-header {
            background: var(--bg-primary);
            padding: var(--space-4);
            border-bottom: 1px solid var(--border-light);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .playlist-selector {
            display: flex;
            align-items: center;
            gap: var(--space-2);
            background: var(--bg-secondary);
            padding: var(--space-2) var(--space-3);
            border-radius: var(--radius-lg);
            cursor: pointer;
        }

        .playlist-name {
            font-weight: 600;
            color: var(--text-primary);
        }

        .add-playlist-btn {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: var(--primary-500);
            color: white;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
        }

        .playlist-modal {
            background: var(--bg-primary);
            border-radius: var(--radius-xl);
            padding: var(--space-6);
            margin: var(--space-4);
            max-width: 320px;
            width: 100%;
        }

        .playlist-list {
            max-height: 300px;
            overflow-y: auto;
            margin: var(--space-4) 0;
        }

        .playlist-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: var(--space-3);
            border-radius: var(--radius-md);
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .playlist-item:hover {
            background: var(--bg-secondary);
        }

        .playlist-item.active {
            background: rgba(139, 92, 246, 0.1);
            color: var(--primary-500);
        }

        .playlist-input {
            width: 100%;
            padding: var(--space-3);
            border: 2px solid var(--border-light);
            border-radius: var(--radius-md);
            font-size: var(--text-base);
            margin: var(--space-4) 0;
        }

        .playlist-input:focus {
            border-color: var(--primary-500);
            outline: none;
        }

        /* ===== Êó•ËØ≠ËØ≠Ë®ÄÂàáÊç¢ÁªÑ‰ª∂ ===== */
        .language-switcher {
            display: flex;
            background: var(--bg-primary);
            border-radius: var(--radius-lg);
            padding: var(--space-1);
            box-shadow: var(--shadow-sm);
            margin-bottom: var(--space-4);
            border: 1px solid var(--border-light);
        }

        .language-tab {
            flex: 1;
            padding: var(--space-2) var(--space-3);
            border-radius: var(--radius-md);
            font-size: var(--text-sm);
            font-weight: 600;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s ease;
            border: none;
            background: transparent;
            color: var(--text-secondary);
        }

        .language-tab.active {
            background: var(--primary-500);
            color: white;
            box-shadow: var(--shadow-sm);
        }

        .language-tab:hover:not(.active) {
            background: var(--bg-secondary);
            color: var(--text-primary);
        }

        .language-tab.japanese {
            font-family: var(--font-japanese-sans);
        }

        .language-tab.romaji {
            font-family: var(--font-romaji);
        }

        /* ===== Â§öËØ≠Ë®ÄÊ≠åËØçÊòæÁ§∫ ===== */
        .lyrics-line-container {
            margin-bottom: var(--space-4);
            padding: var(--space-3);
            border-radius: var(--radius-md);
            transition: all 0.3s ease;
        }

        .lyrics-line-container.current {
            background: rgba(59, 130, 246, 0.1);
            border-left: 4px solid var(--sync-500);
        }

        /* ÂçïËØ≠Ë®ÄÊ®°Âºè */
        .lyrics-line-single {
            font-size: var(--text-xl);
            line-height: 1.6;
            text-align: center;
            padding: var(--space-3) 0;
            transition: all 0.3s ease;
        }

        .lyrics-line-single.kanji {
            font-family: var(--font-japanese-serif);
            font-weight: 500;
        }

        .lyrics-line-single.hiragana {
            font-family: var(--font-japanese-sans);
            font-weight: 400;
        }

        .lyrics-line-single.romaji {
            font-family: var(--font-romaji);
            font-weight: 400;
            font-style: italic;
        }

        /* Â≠¶‰π†Ê®°ÂºèÔºà‰∏âËØ≠ÂêåÊòæÔºâ */
        .lyrics-line-learning {
            display: flex;
            flex-direction: column;
            gap: var(--space-1);
            text-align: center;
            padding: var(--space-3) 0;
        }

        .lyrics-text-kanji {
            font-size: var(--text-xl);
            font-family: var(--font-japanese-serif);
            color: var(--text-primary);
            font-weight: 600;
        }

        .lyrics-text-hiragana {
            font-size: var(--text-lg);
            font-family: var(--font-japanese-sans);
            color: var(--text-secondary);
        }

        .lyrics-text-romaji {
            font-size: var(--text-base);
            font-family: var(--font-romaji);
            color: var(--text-tertiary);
            font-style: italic;
        }

        /* KTVÊ®°ÂºèÂ§öËØ≠Ë®Ä */
        .ktv-lyrics-multilang {
            text-align: center;
            margin-bottom: var(--space-6);
        }

        .ktv-text-kanji {
            font-size: var(--text-ktv-xl);
            color: var(--ktv-text-current);
            font-family: var(--font-japanese-serif);
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
            margin-bottom: var(--space-2);
        }

        .ktv-text-hiragana {
            font-size: var(--text-ktv-lg);
            color: var(--ktv-text-next);
            font-family: var(--font-japanese-sans);
            opacity: 0.9;
            margin-bottom: var(--space-2);
        }

        .ktv-text-romaji {
            font-size: var(--text-ktv-md);
            color: var(--ktv-text-next);
            font-family: var(--font-romaji);
            font-style: italic;
            opacity: 0.7;
        }

        /* ===== Êó•ËØ≠ËæìÂÖ•‰ºòÂåñ ===== */
        .japanese-search-input {
            background: var(--bg-secondary);
            border: 2px solid var(--border-light);
            border-radius: var(--radius-full);
            padding: var(--space-3) var(--space-4);
            font-size: var(--text-base);
            width: 100%;
            transition: all 0.2s ease;
            font-family: var(--font-japanese-sans);
            /* Êó•ËØ≠ËæìÂÖ•Ê≥ï‰ºòÂåñ */
            ime-mode: auto;
        }

        .japanese-search-input:focus {
            border-color: var(--primary-500);
            box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.1);
            outline: none;
        }

        .japanese-search-input::placeholder {
            color: var(--text-tertiary);
            font-family: var(--font-japanese-sans);
        }

        /* ===== Â≠¶‰π†ËøõÂ∫¶ÁªÑ‰ª∂ ===== */
        .learning-status-badge {
            display: inline-flex;
            align-items: center;
            gap: var(--space-1);
            padding: var(--space-1) var(--space-2);
            border-radius: var(--radius-full);
            font-size: var(--text-xs);
            font-weight: 600;
            font-family: var(--font-japanese-sans);
        }

        .learning-status-badge.not-started {
            background: var(--bg-tertiary);
            color: var(--text-secondary);
        }

        .learning-status-badge.learning {
            background: rgba(249, 115, 22, 0.1);
            color: var(--secondary-500);
        }

        .learning-status-badge.mastered {
            background: rgba(34, 197, 94, 0.1);
            color: #22c55e;
        }

        /* ===== Êó•ËØ≠ÂàÜÁ±ªÊ†áÁ≠æ ===== */
        .japanese-category-tabs {
            display: flex;
            gap: var(--space-2);
            margin-bottom: var(--space-4);
            overflow-x: auto;
            padding-bottom: var(--space-2);
        }

        .category-tab {
            padding: var(--space-2) var(--space-4);
            border-radius: var(--radius-full);
            background: var(--bg-secondary);
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: var(--text-sm);
            white-space: nowrap;
            border: 2px solid transparent;
            font-family: var(--font-japanese-sans);
        }

        .category-tab.active {
            background: var(--primary-500);
            color: white;
            border-color: var(--primary-600);
        }

        .category-tab:hover:not(.active) {
            background: var(--bg-primary);
            border-color: var(--border-medium);
        }

        .category-tab.j-pop {
            background: linear-gradient(135deg, #ff6b6b, #feca57);
            color: white;
        }

        .category-tab.anime {
            background: linear-gradient(135deg, #a8e6cf, #88d8c0);
            color: #2d3436;
        }

        .category-tab.learning {
            background: linear-gradient(135deg, #74b9ff, #0984e3);
            color: white;
        }

        /* ===== Âä®ÁîªÊïàÊûú ===== */
        @keyframes language-switch {
            0% {
                opacity: 0;
                transform: translateY(10px);
            }
            100% {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .lyrics-line.switching {
            animation: language-switch 0.3s ease-out;
        }

        @keyframes text-reveal {
            0% {
                opacity: 0;
                filter: blur(3px);
            }
            100% {
                opacity: 1;
                filter: blur(0);
            }
        }

        .lyrics-text-entering {
            animation: text-reveal 0.5s ease-out;
        }

        /* ===== ‰∏™‰∫∫‰∏≠ÂøÉÊ†∑Âºè ===== */
        .profile-content {
            flex: 1;
            background: var(--bg-secondary);
        }

        .profile-header {
            background: linear-gradient(135deg, var(--primary-500), var(--secondary-500));
            color: white;
            padding: var(--space-8) var(--space-4);
            text-align: center;
        }

        .profile-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto var(--space-4);
            font-size: 32px;
        }

        .profile-name {
            font-size: var(--text-2xl);
            font-weight: 600;
            margin-bottom: var(--space-2);
        }

        .profile-stats {
            display: flex;
            justify-content: center;
            gap: var(--space-6);
            margin-top: var(--space-4);
        }

        .stat-item {
            text-align: center;
        }

        .stat-number {
            font-size: var(--text-xl);
            font-weight: 700;
            display: block;
        }

        .stat-label {
            font-size: var(--text-sm);
            opacity: 0.9;
        }

        .profile-menu {
            padding: var(--space-4);
        }

        .menu-section {
            background: var(--bg-primary);
            border-radius: var(--radius-xl);
            margin-bottom: var(--space-4);
            overflow: hidden;
        }

        .menu-item {
            display: flex;
            align-items: center;
            gap: var(--space-3);
            padding: var(--space-4);
            cursor: pointer;
            transition: all 0.2s ease;
            border-bottom: 1px solid var(--border-light);
        }

        .menu-item:last-child {
            border-bottom: none;
        }

        .menu-item:hover {
            background: var(--bg-secondary);
        }

        .menu-icon {
            width: 24px;
            height: 24px;
            color: var(--primary-500);
        }

        .menu-text {
            flex: 1;
            font-size: var(--text-base);
        }

        .menu-arrow {
            color: var(--text-tertiary);
        }

        /* ===== Âä†ËΩΩÂä®Áîª ===== */
        .loading {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: var(--space-2);
            color: var(--text-secondary);
        }

        .spinner {
            width: 20px;
            height: 20px;
            border: 2px solid var(--border-light);
            border-top: 2px solid var(--primary-500);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* ===== ÂìçÂ∫îÂºèËÆæËÆ° ===== */
        @media (max-width: 480px) {
            .phone-container {
                width: 100%;
                height: 100vh;
                margin: 0;
                border-radius: 0;
                border: none;
            }
        }

        /* ===== Ê®°ÊÄÅÊ°ÜÊ†∑Âºè ===== */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .modal-overlay.show {
            opacity: 1;
            visibility: visible;
        }

        .modal {
            background: var(--bg-primary);
            border-radius: var(--radius-xl);
            padding: var(--space-6);
            margin: var(--space-4);
            max-width: 320px;
            width: 100%;
            transform: scale(0.9);
            transition: all 0.3s ease;
        }

        .modal-overlay.show .modal {
            transform: scale(1);
        }
    </style>
</head>
<body>
    <!-- ÊâãÊú∫ÂÆπÂô® -->
    <div class="phone-container">
        <!-- Áä∂ÊÄÅÊ†è -->
        <div class="status-bar">
            <span>9:41</span>
            <span>100% üîã</span>
        </div>

        <!-- ‰∏ªÂ±èÂπïÂå∫Âüü -->
        <div class="screen">
            <!-- È¶ñÈ°µ - ËØÜÂà´È°µÈù¢ -->
            <div class="page" id="homePage">
                <!-- ÂØºËà™Ê†è -->
                <div class="nav-header">
                    <div class="nav-title">
                        üéå LyricNote
                    </div>
                    <div class="nav-actions">
                        <div class="nav-icon" onclick="showModal('Ë®≠ÂÆöÈñãÁô∫‰∏≠...')">‚öôÔ∏è</div>
                        <div class="nav-icon" onclick="switchPage('collectionPage')">üìñ</div>
                    </div>
                </div>

                <!-- ‰∏ªË¶ÅÂÜÖÂÆπÂå∫Âüü -->
                <div class="home-content">
                    <div class="recognition-area">
                        <!-- ËØÜÂà´ÊåâÈíÆ -->
                        <button class="recognition-button" id="recognitionBtn" onclick="startRecognition()">
                            <div class="mic-icon">üé§</div>
                        </button>
                        
                        <!-- Áä∂ÊÄÅÊñáÂ≠ó -->
                        <div class="status-text" id="statusText">Êó•Êú¨„ÅÆÈü≥Ê•Ω„ÇíË™çË≠ò„Åô„Çã</div>
                    </div>

                    <!-- KTVÊ®°ÂºèÂºÄÂÖ≥ -->
                    <div class="ktv-toggle-section">
                        <div class="toggle-container">
                            <div class="toggle-label">
                                <div class="toggle-icon">üé§</div>
                                <div class="toggle-text">
                                    <div class="toggle-title">KTV„É¢„Éº„Éâ</div>
                                    <div class="toggle-desc">Â§ßÊñáÂ≠óÊ≠åË©ûË°®Á§∫</div>
                                </div>
                            </div>
                            <div class="toggle-switch" onclick="toggleKTVGlobalMode()">
                                <div class="toggle-slider" id="ktvToggle"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Â∫ïÈÉ®ÂØºËà™ -->
                <div class="tab-navigator">
                    <div class="tab-item active" onclick="switchPage('homePage')">
                        <div class="tab-icon">üè†</div>
                        <div class="tab-label">„Éõ„Éº„É†</div>
                    </div>
                    <div class="tab-item inactive" onclick="switchPage('lyricsPage')">
                        <div class="tab-icon">üìù</div>
                        <div class="tab-label">Ê≠åË©û</div>
                    </div>
                    <div class="tab-item inactive" onclick="switchPage('createPage')">
                        <div class="tab-icon">‚ú®</div>
                        <div class="tab-label">‰ΩúÊàê</div>
                    </div>
                    <div class="tab-item inactive" onclick="switchPage('collectionPage')">
                        <div class="tab-icon">üíæ</div>
                        <div class="tab-label">„Ç≥„É¨„ÇØ„Ç∑„Éß„É≥</div>
                    </div>
                    <div class="tab-item inactive" onclick="switchPage('profilePage')">
                        <div class="tab-icon">üë§</div>
                        <div class="tab-label">„Éó„É≠„Éï„Ç£„Éº„É´</div>
                    </div>
                </div>
            </div>

            <!-- Ê≠åËØçÈ°µÈù¢ -->
            <div class="page hidden" id="lyricsPage">
                <!-- ÂØºËà™Ê†è -->
                <div class="nav-header">
                    <div class="nav-title">Ê≠åË©ûÂêåÊúü</div>
                    <div class="nav-actions">
                        <div class="nav-icon" onclick="toggleKTVMode()">üñ•Ô∏è</div>
                        <div class="nav-icon" onclick="showModal('ÂÖ±ÊúâÊ©üËÉΩÈñãÁô∫‰∏≠...')">üì§</div>
                    </div>
                </div>

                <!-- Ê≠åËØçÂÜÖÂÆπ -->
                <div class="lyrics-content">
                    <!-- Ê≠åÊõ≤‰ø°ÊÅØ -->
                    <div class="song-info">
                        <div class="song-cover">üéµ</div>
                        <div class="song-details">
                            <h2>ÊÅã</h2>
                            <p>ÊòüÈáéÊ∫ê ‚Ä¢ ÊÅã (Single)</p>
                        </div>
                    </div>

                    <!-- ËØ≠Ë®ÄÂàáÊç¢Âô® -->
                    <div class="language-switcher">
                        <button class="language-tab active japanese" onclick="switchLanguage('kanji')">Êº¢Â≠ó</button>
                        <button class="language-tab japanese" onclick="switchLanguage('hiragana')">„Å≤„Çâ„Åå„Å™</button>
                        <button class="language-tab romaji" onclick="switchLanguage('romaji')">Romaji</button>
                        <button class="language-tab" onclick="switchLanguage('learning')">Â≠¶Áøí„É¢„Éº„Éâ</button>
                    </div>

                    <!-- Ê≠åËØçÊªöÂä®Âå∫Âüü -->
                    <div class="lyrics-scroll-area" id="lyricsContainer">
                        <!-- Ê±âÂ≠óÊ®°ÂºèÊ≠åËØç -->
                        <div class="lyrics-mode" id="kanjiMode">
                            <div class="lyrics-line-container past">
                                <div class="lyrics-line-single kanji">ËÉ∏„Å´Êâã„Çí„ÅÇ„Å¶</div>
                            </div>
                            <div class="lyrics-line-container current">
                                <div class="lyrics-line-single kanji">ÊÅã„Çí„Åó„Åü„ÅÆ„ÅØ</div>
                            </div>
                            <div class="lyrics-line-container">
                                <div class="lyrics-line-single kanji">„ÅÇ„Å™„Åü„ÅÆ„Åõ„ÅÑ„Å†</div>
                            </div>
                            <div class="lyrics-line-container">
                                <div class="lyrics-line-single kanji">Âàù„ÇÅ„Å¶„ÅÆÊ∞óÊåÅ„Å°</div>
                            </div>
                            <div class="lyrics-line-container">
                                <div class="lyrics-line-single kanji">Âêõ„ÅÆÂâç„Å†„Å®„ÅÜ„Åæ„ÅèË®ÄËëâ„Å´„Åß„Åç„Å™„ÅÑ</div>
                            </div>
                        </div>

                        <!-- ÂÅáÂêçÊ®°ÂºèÊ≠åËØç -->
                        <div class="lyrics-mode hidden" id="hiraganaMode">
                            <div class="lyrics-line-container past">
                                <div class="lyrics-line-single hiragana">„ÇÄ„Å≠„Å´„Å¶„Çí„ÅÇ„Å¶</div>
                            </div>
                            <div class="lyrics-line-container current">
                                <div class="lyrics-line-single hiragana">„Åì„ÅÑ„Çí„Åó„Åü„ÅÆ„ÅØ</div>
                            </div>
                            <div class="lyrics-line-container">
                                <div class="lyrics-line-single hiragana">„ÅÇ„Å™„Åü„ÅÆ„Åõ„ÅÑ„Å†</div>
                            </div>
                            <div class="lyrics-line-container">
                                <div class="lyrics-line-single hiragana">„ÅØ„Åò„ÇÅ„Å¶„ÅÆ„Åç„ÇÇ„Å°</div>
                            </div>
                            <div class="lyrics-line-container">
                                <div class="lyrics-line-single hiragana">„Åç„Åø„ÅÆ„Åæ„Åà„Å†„Å®„ÅÜ„Åæ„Åè„Åì„Å®„Å∞„Å´„Åß„Åç„Å™„ÅÑ</div>
                            </div>
                        </div>

                        <!-- ÁΩóÈ©¨Èü≥Ê®°ÂºèÊ≠åËØç -->
                        <div class="lyrics-mode hidden" id="romajiMode">
                            <div class="lyrics-line-container past">
                                <div class="lyrics-line-single romaji">mune ni te wo ate</div>
                            </div>
                            <div class="lyrics-line-container current">
                                <div class="lyrics-line-single romaji">koi wo shita no wa</div>
                            </div>
                            <div class="lyrics-line-container">
                                <div class="lyrics-line-single romaji">anata no sei da</div>
                            </div>
                            <div class="lyrics-line-container">
                                <div class="lyrics-line-single romaji">hajimete no kimochi</div>
                            </div>
                            <div class="lyrics-line-container">
                                <div class="lyrics-line-single romaji">kimi no mae da to umaku kotoba ni dekinai</div>
                            </div>
                        </div>

                        <!-- Â≠¶‰π†Ê®°ÂºèÊ≠åËØç -->
                        <div class="lyrics-mode hidden" id="learningMode">
                            <div class="lyrics-line-container past">
                                <div class="lyrics-line-learning">
                                    <div class="lyrics-text-kanji">ËÉ∏„Å´Êâã„Çí„ÅÇ„Å¶</div>
                                    <div class="lyrics-text-hiragana">„ÇÄ„Å≠„Å´„Å¶„Çí„ÅÇ„Å¶</div>
                                    <div class="lyrics-text-romaji">mune ni te wo ate</div>
                                </div>
                            </div>
                            <div class="lyrics-line-container current">
                                <div class="lyrics-line-learning">
                                    <div class="lyrics-text-kanji">ÊÅã„Çí„Åó„Åü„ÅÆ„ÅØ</div>
                                    <div class="lyrics-text-hiragana">„Åì„ÅÑ„Çí„Åó„Åü„ÅÆ„ÅØ</div>
                                    <div class="lyrics-text-romaji">koi wo shita no wa</div>
                                </div>
                            </div>
                            <div class="lyrics-line-container">
                                <div class="lyrics-line-learning">
                                    <div class="lyrics-text-kanji">„ÅÇ„Å™„Åü„ÅÆ„Åõ„ÅÑ„Å†</div>
                                    <div class="lyrics-text-hiragana">„ÅÇ„Å™„Åü„ÅÆ„Åõ„ÅÑ„Å†</div>
                                    <div class="lyrics-text-romaji">anata no sei da</div>
                                </div>
                            </div>
                            <div class="lyrics-line-container">
                                <div class="lyrics-line-learning">
                                    <div class="lyrics-text-kanji">Âàù„ÇÅ„Å¶„ÅÆÊ∞óÊåÅ„Å°</div>
                                    <div class="lyrics-text-hiragana">„ÅØ„Åò„ÇÅ„Å¶„ÅÆ„Åç„ÇÇ„Å°</div>
                                    <div class="lyrics-text-romaji">hajimete no kimochi</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- ÊéßÂà∂Âå∫Âüü -->
                    <div class="lyrics-controls">
                        <button class="control-button" onclick="adjustTime(-2)" title="Êó∂Èó¥ -2s">-2s</button>
                        <div class="progress-container">
                            <div class="progress-bar">
                                <div class="progress-fill"></div>
                            </div>
                            <div class="time-display">
                                <span>02:30</span>
                                <span>04:15</span>
                            </div>
                        </div>
                        <button class="control-button" onclick="togglePlay()" title="ÊöÇÂÅú/Êí≠Êîæ">‚è∏Ô∏è</button>
                        <button class="control-button" onclick="toggleFavorite()" title="Êî∂Ëóè">‚ô°</button>
                        <button class="control-button" onclick="showModal('ËÆæÁΩÆÈ°µÈù¢ÂºÄÂèë‰∏≠...')" title="ËÆæÁΩÆ">‚öôÔ∏è</button>
                    </div>
                </div>

                <!-- Â∫ïÈÉ®ÂØºËà™ -->
                <div class="tab-navigator">
                    <div class="tab-item inactive" onclick="switchPage('homePage')">
                        <div class="tab-icon">üè†</div>
                        <div class="tab-label">È¶ñÈ°µ</div>
                    </div>
                    <div class="tab-item active" onclick="switchPage('lyricsPage')">
                        <div class="tab-icon">üìù</div>
                        <div class="tab-label">Ê≠åËØç</div>
                    </div>
                    <div class="tab-item inactive" onclick="switchPage('createPage')">
                        <div class="tab-icon">‚ú®</div>
                        <div class="tab-label">Âàõ‰Ωú</div>
                    </div>
                    <div class="tab-item inactive" onclick="switchPage('collectionPage')">
                        <div class="tab-icon">üíæ</div>
                        <div class="tab-label">Êî∂Ëóè</div>
                    </div>
                    <div class="tab-item inactive" onclick="switchPage('profilePage')">
                        <div class="tab-icon">üë§</div>
                        <div class="tab-label">ÊàëÁöÑ</div>
                    </div>
                </div>
            </div>

            <!-- KTVÊ®°ÂºèÈ°µÈù¢ -->
            <div class="page hidden ktv-mode" id="ktvPage">
                <div class="ktv-song-info">
                    <h2>„ÄäÊÅã„Äã</h2>
                    <p>ÊòüÈáéÊ∫ê</p>
                </div>

                <div class="ktv-lyrics-multilang" id="ktvLyricsDisplay">
                    <div class="ktv-text-kanji">ÊÅã„Çí„Åó„Åü„ÅÆ„ÅØ</div>
                    <div class="ktv-text-hiragana">„Åì„ÅÑ„Çí„Åó„Åü„ÅÆ„ÅØ</div>
                    <div class="ktv-text-romaji">koi wo shita no wa</div>
                </div>

                <div class="ktv-lyrics-next">
                    <div style="text-align: center; color: var(--ktv-text-next); font-family: var(--font-japanese-serif);">
                        „ÅÇ„Å™„Åü„ÅÆ„Åõ„ÅÑ„Å†<br>
                        <span style="font-family: var(--font-japanese-sans); font-size: var(--text-lg); opacity: 0.8;">„ÅÇ„Å™„Åü„ÅÆ„Åõ„ÅÑ„Å†</span><br>
                        <span style="font-family: var(--font-romaji); font-size: var(--text-base); opacity: 0.6; font-style: italic;">anata no sei da</span>
                    </div>
                </div>

                <div class="ktv-progress">
                    <div class="ktv-progress-fill"></div>
                </div>

                <div class="ktv-controls">
                    <button class="ktv-control-button" onclick="togglePlay()">‚è∏Ô∏è</button>
                    <button class="ktv-control-button" onclick="previousLine()">‚èÆÔ∏è</button>
                    <button class="ktv-control-button" onclick="nextLine()">‚è≠Ô∏è</button>
                    <button class="ktv-control-button" onclick="exitKTVMode()">‚ùå</button>
                </div>
            </div>

            <!-- Âàõ‰ΩúÈ°µÈù¢ -->
            <div class="page hidden" id="createPage">
                <!-- È°∂ÈÉ®Â∑•ÂÖ∑Ê†è -->
                <div class="create-header">
                    <div class="create-title">AIÊâãÂ∏êÂàõ‰Ωú</div>
                    <div class="create-actions">
                        <button class="btn btn-secondary" onclick="showModal('‰øùÂ≠òÂäüËÉΩÂºÄÂèë‰∏≠...')">üíæ ‰øùÂ≠ò</button>
                        <button class="btn btn-primary" onclick="showModal('ÂàÜ‰∫´ÂäüËÉΩÂºÄÂèë‰∏≠...')">üì§ ÂàÜ‰∫´</button>
                    </div>
                </div>

                <!-- ‰∏ªË¶ÅÂÜÖÂÆπÂå∫Âüü -->
                <div class="create-content">
                    <!-- ÁîªÂ∏ÉÂå∫Âüü -->
                    <div class="canvas-area">
                        <div class="canvas">
                            <div class="canvas-content">
                                <h3>Â§úÁöÑÁ¨¨‰∏ÉÁ´†</h3>
                                <div class="lyrics-text">
                                    "Âá∂Êâã‰∏çÂú®Âú∫<br>
                                    ÊàëÁøªÈòÖÁõ∏Áâá<br>
                                    ÂØªÊâæ‰Ω†ÈÅóÁïôÁöÑÁ∫øÁ¥¢"
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- AIÂä©ÊâãÈù¢Êùø -->
                    <div class="ai-assistant-panel">
                        <div class="ai-header">
                            ü§ñ AIÂàõ‰ΩúÂä©Êâã
                        </div>
                        
                        <div style="margin-bottom: var(--space-3);">
                            <div style="font-size: var(--text-sm); color: var(--text-secondary); margin-bottom: var(--space-2);">üí° Â∏ÉÂ±ÄÂª∫ËÆÆ</div>
                            <div class="ai-suggestions">
                                <div class="ai-suggestion selected">üìÑ</div>
                                <div class="ai-suggestion">üåÖ</div>
                                <div class="ai-suggestion">üé®</div>
                                <div class="ai-suggestion">‚ú®</div>
                            </div>
                        </div>

                        <div>
                            <div style="font-size: var(--text-sm); color: var(--text-secondary); margin-bottom: var(--space-2);">üé® Ëâ≤ÂΩ©Êé®Ëçê</div>
                            <div class="ai-suggestions">
                                <div class="ai-suggestion" style="background: linear-gradient(45deg, #ff9a9e, #fecfef)"></div>
                                <div class="ai-suggestion" style="background: linear-gradient(45deg, #a8edea, #fed6e3)"></div>
                                <div class="ai-suggestion" style="background: linear-gradient(45deg, #667eea, #764ba2)"></div>
                                <div class="ai-suggestion" style="background: linear-gradient(45deg, #f093fb, #f5576c)"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Â∑•ÂÖ∑Ê†è -->
                    <div class="toolbar">
                        <div class="toolbar-item">
                            <div class="toolbar-icon">üìù</div>
                            <div class="toolbar-label">ÊñáÂ≠ó</div>
                        </div>
                        <div class="toolbar-item">
                            <div class="toolbar-icon">üé®</div>
                            <div class="toolbar-label">ËÉåÊôØ</div>
                        </div>
                        <div class="toolbar-item">
                            <div class="toolbar-icon">‚ú®</div>
                            <div class="toolbar-label">Ë£ÖÈ•∞</div>
                        </div>
                        <div class="toolbar-item">
                            <div class="toolbar-icon">üìê</div>
                            <div class="toolbar-label">Â∏ÉÂ±Ä</div>
                        </div>
                        <div class="toolbar-item">
                            <div class="toolbar-icon">üéØ</div>
                            <div class="toolbar-label">ÂõæÂ±Ç</div>
                        </div>
                    </div>
                </div>

                <!-- Â∫ïÈÉ®ÂØºËà™ -->
                <div class="tab-navigator">
                    <div class="tab-item inactive" onclick="switchPage('homePage')">
                        <div class="tab-icon">üè†</div>
                        <div class="tab-label">È¶ñÈ°µ</div>
                    </div>
                    <div class="tab-item inactive" onclick="switchPage('lyricsPage')">
                        <div class="tab-icon">üìù</div>
                        <div class="tab-label">Ê≠åËØç</div>
                    </div>
                    <div class="tab-item active" onclick="switchPage('createPage')">
                        <div class="tab-icon">‚ú®</div>
                        <div class="tab-label">Âàõ‰Ωú</div>
                    </div>
                    <div class="tab-item inactive" onclick="switchPage('collectionPage')">
                        <div class="tab-icon">üíæ</div>
                        <div class="tab-label">Êî∂Ëóè</div>
                    </div>
                    <div class="tab-item inactive" onclick="switchPage('profilePage')">
                        <div class="tab-icon">üë§</div>
                        <div class="tab-label">ÊàëÁöÑ</div>
                    </div>
                </div>
            </div>

            <!-- Êî∂ËóèÈ°µÈù¢ -->
            <div class="page hidden" id="collectionPage">
                <!-- Êî∂ËóèÂ§πÈÄâÊã© -->
                <div class="playlist-header">
                    <div class="playlist-selector" onclick="showPlaylistModal()">
                        <span class="playlist-name" id="currentPlaylistName">J-POP„Ç≥„É¨„ÇØ„Ç∑„Éß„É≥</span>
                        <span>‚ñº</span>
                    </div>
                    <button class="add-playlist-btn" onclick="showAddPlaylistModal()">+</button>
                </div>

                <!-- ÊêúÁ¥¢Â§¥ÈÉ® -->
                <div class="search-header">
                    <input type="text" class="japanese-search-input" placeholder="üîç Êõ≤Âêç„Éª„Ç¢„Éº„ÉÜ„Ç£„Çπ„ÉàÊ§úÁ¥¢...">
                    <div class="japanese-category-tabs">
                        <div class="category-tab active">ÂÖ®„Å¶</div>
                        <div class="category-tab j-pop">J-POP</div>
                        <div class="category-tab anime">„Ç¢„Éã„É°</div>
                        <div class="category-tab learning">Â≠¶Áøí‰∏≠</div>
                    </div>
                </div>

                <!-- Êî∂ËóèÂÜÖÂÆπ -->
                <div class="collection-content">
                    <div class="collection-list">
                        <div class="collection-item" onclick="switchPage('lyricsPage')">
                            <div class="item-cover">üéµ</div>
                            <div class="item-info">
                                <h4>ÊÅã</h4>
                                <p>ÊòüÈáéÊ∫ê ‚Ä¢ 2ÊôÇÈñìÂâç ‚Ä¢ <span class="learning-status-badge learning">Â≠¶Áøí‰∏≠</span></p>
                            </div>
                            <div class="item-actions">
                                <button class="action-button" onclick="event.stopPropagation(); toggleFavorite()">‚ô°</button>
                                <button class="action-button" onclick="event.stopPropagation(); showModal('Êõ¥Â§öÈÅ∏ÊäûËÇ¢')">‚ãØ</button>
                            </div>
                        </div>

                        <div class="collection-item">
                            <div class="item-cover">üé∂</div>
                            <div class="item-info">
                                <h4>ÂâçÂâçÂâç‰∏ñ</h4>
                                <p>RADWIMPS ‚Ä¢ Êò®Êó• ‚Ä¢ <span class="learning-status-badge mastered">ÁøíÂæóÊ∏à„Åø</span></p>
                            </div>
                            <div class="item-actions">
                                <button class="action-button">‚ô°</button>
                                <button class="action-button">‚ãØ</button>
                            </div>
                        </div>

                        <div class="collection-item">
                            <div class="item-cover">üéº</div>
                            <div class="item-info">
                                <h4>Êâì‰∏äËä±ÁÅ´</h4>
                                <p>DAOKO√óÁ±≥Ê¥•ÁéÑÂ∏´ ‚Ä¢ 3Êó•Ââç ‚Ä¢ <span class="learning-status-badge not-started">Êú™ÈñãÂßã</span></p>
                            </div>
                            <div class="item-actions">
                                <button class="action-button">‚ô°</button>
                                <button class="action-button">‚ãØ</button>
                            </div>
                        </div>

                        <div class="collection-item">
                            <div class="item-cover">‚ú®</div>
                            <div class="item-info">
                                <h4>ÊÅã ÊâãÂ∏≥</h4>
                                <p>ÁßÅ„ÅÆ‰ΩúÂìÅ ‚Ä¢ 2ÊôÇÈñìÂâç</p>
                            </div>
                            <div class="item-actions">
                                <button class="action-button" onclick="event.stopPropagation(); switchPage('createPage')">‚úèÔ∏è</button>
                                <button class="action-button">‚ãØ</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Â∫ïÈÉ®ÂØºËà™ -->
                <div class="tab-navigator">
                    <div class="tab-item inactive" onclick="switchPage('homePage')">
                        <div class="tab-icon">üè†</div>
                        <div class="tab-label">È¶ñÈ°µ</div>
                    </div>
                    <div class="tab-item inactive" onclick="switchPage('lyricsPage')">
                        <div class="tab-icon">üìù</div>
                        <div class="tab-label">Ê≠åËØç</div>
                    </div>
                    <div class="tab-item inactive" onclick="switchPage('createPage')">
                        <div class="tab-icon">‚ú®</div>
                        <div class="tab-label">Âàõ‰Ωú</div>
                    </div>
                    <div class="tab-item active" onclick="switchPage('collectionPage')">
                        <div class="tab-icon">üíæ</div>
                        <div class="tab-label">Êî∂Ëóè</div>
                    </div>
                    <div class="tab-item inactive" onclick="switchPage('profilePage')">
                        <div class="tab-icon">üë§</div>
                        <div class="tab-label">ÊàëÁöÑ</div>
                    </div>
                </div>
            </div>

            <!-- ‰∏™‰∫∫‰∏≠ÂøÉÈ°µÈù¢ -->
            <div class="page hidden" id="profilePage">
                <!-- ‰∏™‰∫∫‰ø°ÊÅØÂ§¥ÈÉ® -->
                <div class="profile-header">
                    <div class="profile-avatar">üë§</div>
                    <div class="profile-name">Èü≥‰πêÁà±Â•ΩËÄÖ</div>
                    <div class="profile-stats">
                        <div class="stat-item">
                            <span class="stat-number">156</span>
                            <span class="stat-label">ËØÜÂà´Ê≠åÊõ≤</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-number">42</span>
                            <span class="stat-label">Êî∂ËóèÊ≠åÊõ≤</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-number">8</span>
                            <span class="stat-label">ÊâãÂ∏ê‰ΩúÂìÅ</span>
                        </div>
                    </div>
                </div>

                <!-- ‰∏™‰∫∫‰∏≠ÂøÉÂÜÖÂÆπ -->
                <div class="profile-content">
                    <div class="profile-menu">
                        <div class="menu-section">
                            <div class="menu-item" onclick="showModal('AIËÆæÁΩÆÂºÄÂèë‰∏≠...')">
                                <div class="menu-icon">ü§ñ</div>
                                <div class="menu-text">AIËÆæÁΩÆ</div>
                                <div class="menu-arrow">‚Ä∫</div>
                            </div>
                            <div class="menu-item" onclick="showModal('KTVËÆæÁΩÆÂºÄÂèë‰∏≠...')">
                                <div class="menu-icon">üé§</div>
                                <div class="menu-text">KTVÊ®°ÂºèËÆæÁΩÆ</div>
                                <div class="menu-arrow">‚Ä∫</div>
                            </div>
                            <div class="menu-item" onclick="showModal('Ê≠åËØçËÆæÁΩÆÂºÄÂèë‰∏≠...')">
                                <div class="menu-icon">üìù</div>
                                <div class="menu-text">Ê≠åËØçÊòæÁ§∫ËÆæÁΩÆ</div>
                                <div class="menu-arrow">‚Ä∫</div>
                            </div>
                        </div>

                        <div class="menu-section">
                            <div class="menu-item" onclick="showModal('Êï∞ÊçÆÁªüËÆ°ÂºÄÂèë‰∏≠...')">
                                <div class="menu-icon">üìä</div>
                                <div class="menu-text">ÊàëÁöÑÊï∞ÊçÆ</div>
                                <div class="menu-arrow">‚Ä∫</div>
                            </div>
                            <div class="menu-item" onclick="showModal('Â§á‰ªΩÂäüËÉΩÂºÄÂèë‰∏≠...')">
                                <div class="menu-icon">‚òÅÔ∏è</div>
                                <div class="menu-text">Êï∞ÊçÆÂ§á‰ªΩ</div>
                                <div class="menu-arrow">‚Ä∫</div>
                            </div>
                            <div class="menu-item" onclick="showModal('ÂàÜ‰∫´ÂäüËÉΩÂºÄÂèë‰∏≠...')">
                                <div class="menu-icon">üì§</div>
                                <div class="menu-text">ÂàÜ‰∫´Â∫îÁî®</div>
                                <div class="menu-arrow">‚Ä∫</div>
                            </div>
                        </div>

                        <div class="menu-section">
                            <div class="menu-item" onclick="showModal('Â∏ÆÂä©ÊñáÊ°£ÂºÄÂèë‰∏≠...')">
                                <div class="menu-icon">‚ùì</div>
                                <div class="menu-text">Â∏ÆÂä©‰∏éÂèçÈ¶à</div>
                                <div class="menu-arrow">‚Ä∫</div>
                            </div>
                            <div class="menu-item" onclick="showModal('ÂÖ≥‰∫éÈ°µÈù¢ÂºÄÂèë‰∏≠...')">
                                <div class="menu-icon">‚ÑπÔ∏è</div>
                                <div class="menu-text">ÂÖ≥‰∫éLyricNote</div>
                                <div class="menu-arrow">‚Ä∫</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Â∫ïÈÉ®ÂØºËà™ -->
                <div class="tab-navigator">
                    <div class="tab-item inactive" onclick="switchPage('homePage')">
                        <div class="tab-icon">üè†</div>
                        <div class="tab-label">È¶ñÈ°µ</div>
                    </div>
                    <div class="tab-item inactive" onclick="switchPage('lyricsPage')">
                        <div class="tab-icon">üìù</div>
                        <div class="tab-label">Ê≠åËØç</div>
                    </div>
                    <div class="tab-item inactive" onclick="switchPage('createPage')">
                        <div class="tab-icon">‚ú®</div>
                        <div class="tab-label">Âàõ‰Ωú</div>
                    </div>
                    <div class="tab-item inactive" onclick="switchPage('collectionPage')">
                        <div class="tab-icon">üíæ</div>
                        <div class="tab-label">Êî∂Ëóè</div>
                    </div>
                    <div class="tab-item active" onclick="switchPage('profilePage')">
                        <div class="tab-icon">üë§</div>
                        <div class="tab-label">ÊàëÁöÑ</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ÂÆâÂÖ®Âå∫Âüü -->
        <div class="safe-area-bottom"></div>
    </div>

    <!-- Ê®°ÊÄÅÊ°Ü -->
    <div class="modal-overlay" id="modalOverlay" onclick="hideModal()">
        <div class="modal" onclick="event.stopPropagation()">
            <h3 style="margin-bottom: var(--space-4); color: var(--primary-500);">ÊèêÁ§∫</h3>
            <p id="modalText" style="margin-bottom: var(--space-6); color: var(--text-secondary);">ËøôÊòØ‰∏Ä‰∏™ÊèêÁ§∫‰ø°ÊÅØ</p>
            <div style="display: flex; justify-content: flex-end; gap: var(--space-3);">
                <button class="btn btn-primary" onclick="hideModal()">Á°ÆÂÆö</button>
            </div>
        </div>
    </div>

    <script>
        // ÂÖ®Â±ÄÁä∂ÊÄÅ
        let currentPage = 'homePage';
        let isRecording = false;
        let isPlaying = false;
        let isFavorite = false;
        let isKTVMode = false; // ÂÖ®Â±ÄKTVÊ®°ÂºèÂºÄÂÖ≥
        let currentLanguage = 'kanji'; // ÂΩìÂâçËØ≠Ë®ÄÊ®°Âºè: kanji, hiragana, romaji, learning
        let currentPlaylist = 'j-pop'; // ÂΩìÂâçÈªòËÆ§Êî∂ËóèÂ§π
        let playlists = {
            'j-pop': { name: 'J-POP„Ç≥„É¨„ÇØ„Ç∑„Éß„É≥', songs: [] },
            'anime': { name: '„Ç¢„Éã„É°„ÇΩ„É≥„Ç∞', songs: [] },
            'learning': { name: 'Â≠¶Áøí‰∏≠', songs: [] }
        };

        // Êó•ËØ≠Ê≠åËØçÊï∞ÊçÆ
        let japaneseStringData = {
            statusTexts: {
                default: 'Êó•Êú¨„ÅÆÈü≥Ê•Ω„ÇíË™çË≠ò„Åô„Çã',
                recording: 'Èå≤Èü≥‰∏≠... ({count}s)',
                recognizing: 'AIË™çË≠ò‰∏≠...',
                success: 'Ë™çË≠òÊàêÂäüÔºÅ'
            },
            lyrics: {
                kanji: [
                    'ËÉ∏„Å´Êâã„Çí„ÅÇ„Å¶',
                    'ÊÅã„Çí„Åó„Åü„ÅÆ„ÅØ', 
                    '„ÅÇ„Å™„Åü„ÅÆ„Åõ„ÅÑ„Å†',
                    'Âàù„ÇÅ„Å¶„ÅÆÊ∞óÊåÅ„Å°',
                    'Âêõ„ÅÆÂâç„Å†„Å®„ÅÜ„Åæ„ÅèË®ÄËëâ„Å´„Åß„Åç„Å™„ÅÑ'
                ],
                hiragana: [
                    '„ÇÄ„Å≠„Å´„Å¶„Çí„ÅÇ„Å¶',
                    '„Åì„ÅÑ„Çí„Åó„Åü„ÅÆ„ÅØ',
                    '„ÅÇ„Å™„Åü„ÅÆ„Åõ„ÅÑ„Å†', 
                    '„ÅØ„Åò„ÇÅ„Å¶„ÅÆ„Åç„ÇÇ„Å°',
                    '„Åç„Åø„ÅÆ„Åæ„Åà„Å†„Å®„ÅÜ„Åæ„Åè„Åì„Å®„Å∞„Å´„Åß„Åç„Å™„ÅÑ'
                ],
                romaji: [
                    'mune ni te wo ate',
                    'koi wo shita no wa',
                    'anata no sei da',
                    'hajimete no kimochi', 
                    'kimi no mae da to umaku kotoba ni dekinai'
                ]
            }
        };

        // È°µÈù¢ÂàáÊç¢ÂáΩÊï∞
        function switchPage(pageId) {
            // ÈöêËóèÂΩìÂâçÈ°µÈù¢
            document.getElementById(currentPage).classList.add('hidden');
            
            // ÊòæÁ§∫Êñ∞È°µÈù¢
            document.getElementById(pageId).classList.remove('hidden');
            
            // Êõ¥Êñ∞ÂØºËà™Áä∂ÊÄÅ
            updateTabNavigator(pageId);
            
            // Êõ¥Êñ∞ÂΩìÂâçÈ°µÈù¢Áä∂ÊÄÅ
            currentPage = pageId;

            // ÈÄÄÂá∫KTVÊ®°ÂºèÔºàÂ¶ÇÊûú‰∏çÊòØÂàáÊç¢Âà∞KTVÈ°µÈù¢Ôºâ
            if (pageId !== 'ktvPage') {
                isKTVMode = false;
            }
        }

        // Êõ¥Êñ∞Â∫ïÈÉ®ÂØºËà™Áä∂ÊÄÅ
        function updateTabNavigator(activePageId) {
            const tabMap = {
                'homePage': 0,
                'lyricsPage': 1,
                'createPage': 2,
                'collectionPage': 3,
                'profilePage': 4
            };

            // Ëé∑ÂèñÊâÄÊúâÈ°µÈù¢ÁöÑÂØºËà™Ê†è
            const navigators = document.querySelectorAll('.tab-navigator');
            
            navigators.forEach(navigator => {
                const tabs = navigator.querySelectorAll('.tab-item');
                tabs.forEach((tab, index) => {
                    if (index === tabMap[activePageId]) {
                        tab.classList.remove('inactive');
                        tab.classList.add('active');
                    } else {
                        tab.classList.remove('active');
                        tab.classList.add('inactive');
                    }
                });
            });
        }

        // ËØ≠Ë®ÄÂàáÊç¢ÂáΩÊï∞
        function switchLanguage(language) {
            currentLanguage = language;
            
            // Êõ¥Êñ∞ËØ≠Ë®ÄÂàáÊç¢ÊåâÈíÆÁä∂ÊÄÅ
            const languageTabs = document.querySelectorAll('.language-tab');
            languageTabs.forEach(tab => {
                tab.classList.remove('active');
            });
            
            // ÊøÄÊ¥ªÂΩìÂâçËØ≠Ë®ÄÊåâÈíÆ
            const activeTab = document.querySelector(`[onclick="switchLanguage('${language}')"]`);
            if (activeTab) {
                activeTab.classList.add('active');
            }
            
            // ÊòæÁ§∫ÂØπÂ∫îËØ≠Ë®ÄÁöÑÊ≠åËØç
            const allModes = document.querySelectorAll('.lyrics-mode');
            allModes.forEach(mode => mode.classList.add('hidden'));
            
            let targetModeId;
            switch(language) {
                case 'kanji':
                    targetModeId = 'kanjiMode';
                    break;
                case 'hiragana':
                    targetModeId = 'hiraganaMode';
                    break;
                case 'romaji':
                    targetModeId = 'romajiMode';
                    break;
                case 'learning':
                    targetModeId = 'learningMode';
                    break;
            }
            
            const targetMode = document.getElementById(targetModeId);
            if (targetMode) {
                targetMode.classList.remove('hidden');
                targetMode.classList.add('switching');
                setTimeout(() => {
                    targetMode.classList.remove('switching');
                }, 300);
            }
            
            // Êõ¥Êñ∞KTVÊ®°ÂºèÊòæÁ§∫
            updateKTVDisplay();
        }

        // Êõ¥Êñ∞KTVÊòæÁ§∫
        function updateKTVDisplay() {
            const ktvDisplay = document.getElementById('ktvLyricsDisplay');
            if (!ktvDisplay) return;
            
            const currentIndex = 1; // ÂΩìÂâçÊ≠åËØçÁ¥¢Âºï
            
            if (currentLanguage === 'learning' || !currentLanguage || currentLanguage === 'kanji') {
                // ÊòæÁ§∫Â§öËØ≠Ë®ÄKTVÊ®°Âºè
                ktvDisplay.innerHTML = `
                    <div class="ktv-text-kanji">${japaneseStringData.lyrics.kanji[currentIndex]}</div>
                    <div class="ktv-text-hiragana">${japaneseStringData.lyrics.hiragana[currentIndex]}</div>
                    <div class="ktv-text-romaji">${japaneseStringData.lyrics.romaji[currentIndex]}</div>
                `;
            } else {
                // ÊòæÁ§∫ÂçïËØ≠Ë®ÄKTVÊ®°Âºè
                let text, className;
                switch(currentLanguage) {
                    case 'kanji':
                        text = japaneseStringData.lyrics.kanji[currentIndex];
                        className = 'ktv-text-kanji';
                        break;
                    case 'hiragana':
                        text = japaneseStringData.lyrics.hiragana[currentIndex];
                        className = 'ktv-text-hiragana';
                        break;
                    case 'romaji':
                        text = japaneseStringData.lyrics.romaji[currentIndex];
                        className = 'ktv-text-romaji';
                        break;
                }
                ktvDisplay.innerHTML = `<div class="${className}">${text}</div>`;
            }
        }

        // ÂºÄÂßãËØÜÂà´
        function startRecognition() {
            const btn = document.getElementById('recognitionBtn');
            const statusText = document.getElementById('statusText');
            
            if (isRecording) return;
            
            isRecording = true;
            btn.classList.add('recording');
            
            // Ê®°ÊãüÂΩïÈü≥ËøáÁ®ã
            let countdown = 5;
            statusText.textContent = japaneseStringData.statusTexts.recording.replace('{count}', countdown);
            
            const countInterval = setInterval(() => {
                countdown--;
                statusText.textContent = japaneseStringData.statusTexts.recording.replace('{count}', countdown);
                
                if (countdown <= 0) {
                    clearInterval(countInterval);
                    // Ê®°ÊãüËØÜÂà´ËøáÁ®ã
                    statusText.textContent = japaneseStringData.statusTexts.recognizing;
                    
                    setTimeout(() => {
                        btn.classList.remove('recording');
                        statusText.textContent = japaneseStringData.statusTexts.success;
                        
                        setTimeout(() => {
                            switchPage('lyricsPage');
                            statusText.textContent = japaneseStringData.statusTexts.default;
                            isRecording = false;
                        }, 1000);
                    }, 2000);
                }
            }, 1000);
        }

        // ÂàáÊç¢Âà∞KTVÊ®°Âºè
        function switchToKTVMode() {
            switchPage('lyricsPage');
            setTimeout(() => {
                switchPage('ktvPage');
                isKTVMode = true;
            }, 300);
        }

        // ÈÄÄÂá∫KTVÊ®°Âºè
        function exitKTVMode() {
            switchPage('lyricsPage');
            isKTVMode = false;
        }

        // ÂàáÊç¢KTVÊ®°Âºè
        function toggleKTVMode() {
            if (isKTVMode) {
                exitKTVMode();
            } else {
                switchToKTVMode();
            }
        }

        // Êí≠ÊîæÊéßÂà∂
        function togglePlay() {
            isPlaying = !isPlaying;
            // Êõ¥Êñ∞Êí≠ÊîæÊåâÈíÆÁä∂ÊÄÅ
            const playButtons = document.querySelectorAll('[onclick="togglePlay()"]');
            playButtons.forEach(btn => {
                btn.textContent = isPlaying ? '‚è∏Ô∏è' : '‚ñ∂Ô∏è';
            });
        }

        // Êî∂ËóèÂàáÊç¢
        function toggleFavorite() {
            isFavorite = !isFavorite;
            const favoriteButtons = document.querySelectorAll('[onclick*="toggleFavorite"]');
            favoriteButtons.forEach(btn => {
                if (btn.textContent.includes('‚ô°')) {
                    btn.textContent = isFavorite ? '‚ô•Ô∏è' : '‚ô°';
                }
            });
            
            if (isFavorite) {
                showModal('Â∑≤Ê∑ªÂä†Âà∞Êî∂ËóèÂ§π');
            } else {
                showModal('Â∑≤‰ªéÊî∂ËóèÂ§πÁßªÈô§');
            }
        }

        // Êó∂Èó¥Ë∞ÉÊï¥
        function adjustTime(seconds) {
            showModal(`Êó∂Èó¥Â∑≤Ë∞ÉÊï¥ ${seconds > 0 ? '+' : ''}${seconds}s`);
        }

        // ‰∏ä‰∏ÄÂè•/‰∏ã‰∏ÄÂè•
        function previousLine() {
            showModal('‰∏ä‰∏ÄÂè•Ê≠åËØç');
        }

        function nextLine() {
            showModal('‰∏ã‰∏ÄÂè•Ê≠åËØç');
        }

        // Ê®°ÊÄÅÊ°ÜÊòæÁ§∫
        function showModal(message) {
            const overlay = document.getElementById('modalOverlay');
            const text = document.getElementById('modalText');
            text.textContent = message;
            overlay.classList.add('show');
        }

        // Ê®°ÊÄÅÊ°ÜÈöêËóè
        function hideModal() {
            const overlay = document.getElementById('modalOverlay');
            overlay.classList.remove('show');
        }

        // Ê≠åËØçÂä®ÁîªÔºàÊ®°ÊãüÂÆûÊó∂ÂêåÊ≠•Ôºâ
        function simulateLyricsSync() {
            const lines = document.querySelectorAll('.lyrics-line');
            let currentIndex = 2; // ÂΩìÂâçÈ´ò‰∫ÆÁöÑÊ≠åËØçÁ¥¢Âºï
            
            setInterval(() => {
                if (currentPage === 'lyricsPage' && isPlaying) {
                    // ÈáçÁΩÆÊâÄÊúâÊ≠åËØçÁä∂ÊÄÅ
                    lines.forEach((line, index) => {
                        line.classList.remove('current', 'next', 'past');
                        if (index < currentIndex) {
                            line.classList.add('past');
                        } else if (index === currentIndex) {
                            line.classList.add('current');
                        } else if (index === currentIndex + 1) {
                            line.classList.add('next');
                        }
                    });
                    
                    currentIndex = (currentIndex + 1) % lines.length;
                }
            }, 4000); // ÊØè4ÁßíÂàáÊç¢‰∏ÄÊ¨°Ê≠åËØç
        }

        // ËøõÂ∫¶Êù°Âä®Áîª
        function animateProgress() {
            const progressFills = document.querySelectorAll('.progress-fill, .ktv-progress-fill');
            let progress = 35;
            
            setInterval(() => {
                if (isPlaying) {
                    progress += 0.5;
                    if (progress > 100) progress = 0;
                    
                    progressFills.forEach(fill => {
                        fill.style.width = progress + '%';
                    });
                }
            }, 1000);
        }

        // AIÂª∫ËÆÆ‰∫§‰∫í
        function setupAISuggestions() {
            const suggestions = document.querySelectorAll('.ai-suggestion');
            suggestions.forEach(suggestion => {
                suggestion.addEventListener('click', () => {
                    suggestions.forEach(s => s.classList.remove('selected'));
                    suggestion.classList.add('selected');
                    showModal('AIÂª∫ËÆÆÂ∑≤Â∫îÁî®');
                });
            });
        }

        // Á≠õÈÄâÊ†áÁ≠æ‰∫§‰∫í
        function setupFilterTabs() {
            const tabs = document.querySelectorAll('.filter-tab');
            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    tabs.forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');
                });
            });
        }

        // Â∑•ÂÖ∑Ê†è‰∫§‰∫í
        function setupToolbar() {
            const toolbarItems = document.querySelectorAll('.toolbar-item');
            toolbarItems.forEach(item => {
                item.addEventListener('click', () => {
                    const label = item.querySelector('.toolbar-label').textContent;
                    showModal(`${label}Â∑•ÂÖ∑ÂºÄÂèë‰∏≠...`);
                });
            });
        }

        // ÂàùÂßãÂåñ
        document.addEventListener('DOMContentLoaded', () => {
            // ÂêØÂä®Ê≠åËØçÂêåÊ≠•Âä®Áîª
            simulateLyricsSync();
            
            // ÂêØÂä®ËøõÂ∫¶Êù°Âä®Áîª
            animateProgress();
            
            // ËÆæÁΩÆAIÂª∫ËÆÆ‰∫§‰∫í
            setupAISuggestions();
            
            // ËÆæÁΩÆÁ≠õÈÄâÊ†áÁ≠æ‰∫§‰∫í
            setupFilterTabs();
            
            // ËÆæÁΩÆÂ∑•ÂÖ∑Ê†è‰∫§‰∫í
            setupToolbar();
            
            // Ê∑ªÂä†Ëß¶Êë∏ÂèçÈ¶à
            const buttons = document.querySelectorAll('button, .tab-item, .quick-action, .menu-item');
            buttons.forEach(button => {
                button.addEventListener('touchstart', () => {
                    button.style.transform = 'scale(0.95)';
                });
                
                button.addEventListener('touchend', () => {
                    button.style.transform = '';
                });
            });
        });

        // ÈîÆÁõòÂø´Êç∑ÈîÆ
        document.addEventListener('keydown', (e) => {
            switch(e.key) {
                case '1':
                    switchPage('homePage');
                    break;
                case '2':
                    switchPage('lyricsPage');
                    break;
                case '3':
                    switchPage('createPage');
                    break;
                case '4':
                    switchPage('collectionPage');
                    break;
                case '5':
                    switchPage('profilePage');
                    break;
                case ' ':
                    e.preventDefault();
                    togglePlay();
                    break;
                case 'k':
                    toggleKTVMode();
                    break;
                case 'f':
                    toggleFavorite();
                    break;
            }
        });
    </script>
</body>
</html>
